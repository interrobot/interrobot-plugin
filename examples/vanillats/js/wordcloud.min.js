(()=>{var f=class{static getDocument(e){e=e.replace(f.styleAttributeRegex,"");try{return new DOMParser().parseFromString(e,"text/html")}catch(t){console.warn(t)}}static getDocumentCleanText(e){let t=this.getDocument(e);t===null&&(t=new Document);let s=t.querySelectorAll("script, style, svg, noscript, iframe");for(let n=s.length-1;n>=0;n--)s[n].parentElement.removeChild(s[n]);return t}static getDocumentCleanTextIterator(e){let t=f.getDocumentCleanText(e),s="//text() | //meta[@name='description']/@content | //@alt";return t.evaluate(s,t,null,XPathResult.ANY_TYPE,null)}static getElementTextIterator(e,t){let s=".//text()";return e.evaluate(s,t,null,XPathResult.ANY_TYPE,null)}static getElementTextOnly(e,t){let s=f.getElementTextIterator(e,t),n=[],o=s.iterateNext();for(;o;)n.push(o.nodeValue.trim()),o=s.iterateNext();return n.join(" ")}static isUrl(e){return URL.canParse(e)}static htmlEncode(e){return new Option(e).innerHTML}};f.urlsRegex=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_\:]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/g;f.urlRegex=/^((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_\:]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)$/;f.styleAttributeRegex=/style\s*=\s*("([^"]*)"|'([^']*)')/gi;var N;(function(E){E.Page="page",E.Asset="asset",E.Any="any"})(N||(N={}));var V=class{constructor(e){var t;if(this.meta=e.meta,this.defaultData=e.defaultData,this.autoformInputs=(t=e.autoformInputs)!==null&&t!==void 0?t:[],this.project=e.projectId,this.data={apiVersion:"1.1",autoform:{}},this.data.autoform===null&&(this.data.autoform=[]),this.data.autoform[this.project]={},this.autoformInputs.length>0){let s=async a=>{let c=a.getAttribute("name"),u;a instanceof HTMLSelectElement||a instanceof HTMLTextAreaElement||a.hasAttribute("value")?u=a.value:u=!(a.checked===void 0||a.checked===!1),await this.setAutoformField(c,u)},n=async a=>{let c=a.getAttribute("name"),u=a,l=document.querySelectorAll(`input[type=radio][name=${u.name}]:checked`);if(l.length!==1){console.error("radio control failure");return}let r=l[0].value;await this.setAutoformField(c,r)},o=async a=>{let c=a.getAttribute("name"),u=a,l=document.querySelectorAll(`input[type=checkbox][name=${u.name}]:checked`),r=[];for(let i=0;i<l.length;i++)r.push(l[i].value);let d=r.join("|");await this.setAutoformField(c,d)};for(let a of this.autoformInputs){if(a===null)continue;switch(a.tagName.toLowerCase()){case"input":let u=a;if(u.type=="checkbox"){let d=a,i=document.querySelectorAll(`input[type=checkbox][name=${d.name}]`);i.length===1?u.addEventListener("change",async h=>{await s(u)}):i.length>1&&u.addEventListener("change",async h=>{await o(u)})}else u.type=="radio"?u.addEventListener("change",async d=>{await n(u)}):u.addEventListener("change",async d=>{await s(u)});break;case"textarea":let l=a;l.addEventListener("change",async d=>{await s(l)}),l.addEventListener("input",async d=>{await s(l)});break;case"select":let r=a;r.addEventListener("change",async d=>{await s(r)});break;default:break}}}}async setDataField(e,t,s){this.data[e]!==t&&(this.data[e]=t),s===!0&&await this.updateData()}async getData(){return this.dataLoaded!==null?this.data:(await this.loadData(),this.data)}async loadData(){var e,t,s;let n=window.location.href;n==="about:srcdoc"&&(n=`/reports/${window.parent.document.getElementById("report").dataset.report}/`);let o={pluginUrl:n},a=new Date().getTime(),c=await b.postApiRequest("GetPluginData",o),u=new Date().getTime();try{b.logTiming(`Loaded options: ${JSON.stringify(o)}`,u-a);let r=c.data,d=Object.keys(r).length===0,i={};for(let h in this.defaultData){let m=this.defaultData[h];i[h]=this.defaultData[h]}for(let h in r){let m=this.defaultData[h];i[h]=r[h]}d&&(this.data=i,await this.updateData()),this.data=i,this.dataLoaded=new Date}catch{console.warn(`failed to load plugin data @ 
${JSON.stringify(o)}`)}if(this.autoformInputs.length>0){if(!("autoform"in this.data))this.data.autoform={};else for(let r in this.data.autoform)isNaN(parseInt(r,10))&&delete this.data.autoform[r];if(!(this.project in this.data.autoform)){let r=(t=(e=this.defaultData.autoform)===null||e===void 0?void 0:e[this.project])!==null&&t!==void 0?t:{};this.data.autoform[this.project]=r}}let l=[];for(let r of this.autoformInputs){if(r===null)continue;let d=r.name,i=(s=this.data.autoform[this.project][d])!==null&&s!==void 0?s:null,h=r.tagName.toLowerCase(),m,g=!1,v=!1,w=!1,y=!1,k=!1;switch(h){case"input":m=r,m.type==="radio"?(w=!0,l.push(d)):m.type==="checkbox"&&typeof i=="boolean"?g=!0:m.type==="checkbox"&&typeof i=="string"&&(v=!0);break;case"textarea":m=r,k=!0;break;case"select":m=r,y=!0;break;default:break}if(!m){console.warn("autoform: no input found");return}switch(!0){case w:m.checked=i===m.value;break;case g:m.checked=i||!1;break;case v:m.checked=i?i.toString().indexOf(m.value)>=0:!1;break;case k:m.value=i||"";break;case y:default:i&&(m.value=i);break}}l.forEach(r=>{if(!(document.querySelector(`input[name=${r}]:checked`)!==null)){let i=document.querySelector(`input[name=${r}]`);i&&(i.checked=!0)}})}async setAutoformField(e,t){var s,n;let a=(s=(await this.getData()).autoform)!==null&&s!==void 0?s:{},c=(n=a[this.project])!==null&&n!==void 0?n:{};c[e]!==t&&(c[e]=t,await this.setDataField("autoform",a,!0))}async updateData(){let e=await this.getData();e.meta=this.meta;let t={pluginUrl:window.location.href,pluginData:e},s=await b.postApiRequest("SetPluginData",t)}getDataSlug(){let e=this.getPluginUrl();return btoa(e)}getPluginUrl(){return`${window.location.protocol}//${window.location.host}${window.location.pathname}`}},$=class{constructor(e){var t,s,n;this.includeExternal=!0,this.includeNoRobots=!1,this.project=e.project,this.query=e.query,typeof e.fields=="string"?this.fields=e.fields.split("|"):this.fields=e.fields,this.type=e.type,this.includeExternal=(t=e.includeExternal)!==null&&t!==void 0?t:!0,this.includeNoRobots=(s=e.includeNoRobots)!==null&&s!==void 0?s:!1,this.perPage=(n=e.perPage)!==null&&n!==void 0?n:$.maxPerPage,$.validSorts.indexOf(e.sort)>=0?this.sort=e.sort:this.sort=$.validSorts[1]}getHaystackCacheKey(){return`${this.project}~${this.fields.join("|")}~${this.type}~${this.includeExternal}~${this.includeNoRobots}`}};$.maxPerPage=100;$.validSorts=["?","id","-id","time","-time","status","-status","url","-url"];var M=class{static async execute(e,t,s,n){let o=new Date().getTime(),{paginate:a=!1,showProgress:c=!0,progressMessage:u="Processing..."}=n!=null?n:{};if(e.getHaystackCacheKey()===M.resultsHaystackCacheKey&&t){let h=t.size;if(c===!0){let g=new CustomEvent("ProcessingMessage",{detail:{action:"set",message:u}});document.dispatchEvent(g)}await M.sleep(16);let m=0;if(await t.forEach(async(g,v)=>{await s(g)}),b.logTiming(`Processed ${h.toLocaleString()} search result(s)`,new Date().getTime()-o),c===!0){let g={detail:{action:"clear"}},v=new CustomEvent("ProcessingMessage",g);document.dispatchEvent(v)}return!0}else M.resultsHaystackCacheKey=e.getHaystackCacheKey(),M.resultsCacheTotal=0;let l={project:e.project,query:e.query,external:e.includeExternal,type:e.type,offset:0,fields:e.fields,norobots:e.includeNoRobots,sort:e.sort,perpage:e.perPage},r=await b.postApiRequest("GetResources",l),d=r.__meta__.results.total;M.resultsCacheTotal=d;let i=r.results;for(let h=0;h<i.length;h++){let m=i[h];await M.handleResult(m,d,s)}for(;r.__meta__.results.pagination.nextOffset!==null&&a===!0;){let h=r.__meta__.results.pagination.nextOffset;l.offset=h,e.sort==="?"&&h>0&&console.warn("Random sort (?) with pagination generates fresh randomness on each page. Consider maxing perpage (100) and using 1 page of results when sampling."),r=await b.postApiRequest("GetResources",l),i=r.results;for(let m=0;m<i.length;m++){let g=i[m];await M.handleResult(g,d,s)}}return b.logTiming(`Loaded/processed ${d.toLocaleString()} search result(s)`,new Date().getTime()-o),!1}static async sleep(e){return new Promise(t=>setTimeout(()=>t(),e))}static async handleResult(e,t,s){let n=new I(e);await s(n);let o=n.result,a=new CustomEvent("SearchResultHandled",{detail:{resultNum:o,resultTotal:t}});document.dispatchEvent(a)}},I=class{static normalizeContentWords(e){let t=[];return e!==""&&t.push.apply(t,e.split(/\s+/)),t}static normalizeContentString(e){return I.normalizeContentWords(e).join(" ")}constructor(e){var t;this.optionalFields=["created","modified","size","status","time","norobots","name","type","content","headers","links","assets","origin"],this.result=e.result,this.id=e.id,this.url=(t=e.url)!==null&&t!==void 0?t:null,this.name=e.name,this.processedContent="";for(let s of this.optionalFields)s in e&&(s==="created"||s==="modified"?this[s]=new Date(e[s]):this[s]=e[s])}hasProcessedContent(){return this.processedContent!=""}getProcessedContent(){return this.processedContent}setProcessedContent(e){this.processedContent=e}getContent(){return this.content}getContentTextOnly(){let e=[],t=null,s=f.getDocumentCleanTextIterator(this.getContent());for(t=s.iterateNext();t!==null;){let o=I.normalizeContentString(t.nodeValue);if(o!==""){let a=o.split(" ").filter(c=>c!=="");a.length>0&&e.push.apply(e,a)}t=s.iterateNext()}let n=e.join(" ");return n=n.replace(I.wordPunctuationRe,""),n=n.replace(I.wordWhitespaceRe," "),n}getHeaders(){return this.headers}getUrlPath(){return new URL(this.url).pathname}clearFulltextFields(){this.content="",this.headers=""}};I.wordPunctuationRe=/\s+(?=[\.,;:!\?] )/g;I.wordWhitespaceRe=/\s+/g;var Z=class{constructor(e){this.id=-1,this.project=-1,this.created=null,this.modified=null,this.time=-1,this.report=null,this.id=e.id,this.project=e.project,this.created=e.created,this.modified=e.modified,this.complete=e.complete,this.time=e.time,this.report=e.report}getTimings(){return this.getReportDetailByKey("timings")}getSizes(){return this.getReportDetailByKey("sizes")}getCounts(){return this.getReportDetailByKey("counts")}getReportDetailByKey(e){return this.report&&this.report.hasOwnProperty("detail")&&this.report.detail.hasOwnProperty(e)?this.report.detail[e]:null}},P=class{constructor(e){this.id=-1,this.created=null,this.modified=null,this.name=null,this.type=null,this.url=null,this.urls=null,this.imageDataUri=null,this.id=e.id,this.name=e.name,this.type=e.type,this.created=e.created,this.modified=e.modified,this.url=e.url,this.urls=e.urls,this.imageDataUri=e.imageDataUri}getImageDataUri(){return this.imageDataUri}getDisplayTitle(){return this.name?this.name:this.url?(b.logWarning(P.urlDeprectionWarning),new URL(this.url).hostname):"[error]"}getDisplayUrl(){if(this.urls){let e=this.urls[0],t=this.urls.length,s=t>1?` + ${t-1} more`:"";return`${e}${s}`}else return this.url?(b.logWarning(P.urlDeprectionWarning),new URL(this.url).hostname):"[error]"}static async getApiProject(e){let t={projects:[e],fields:["image","created","modified","urls"]},n=(await b.postApiRequest("GetProjects",t)).results;for(let o=0;o<n.length;o++){let a=n[o];if(a.id===e){let c=new Date(a.created),u=new Date(a.modified),l=a.name||a.url,r=a.image,d=a.urls||null;return new P({id:e,created:c,modified:u,name:l,imageDataUri:r,urls:d})}}return null}static async getApiCrawls(e){let t={complete:"complete",project:e,fields:["created","modified","report","time"]},s=await b.postApiRequest("GetCrawls",t),n=[],o=s.results;for(let a=0;a<o.length;a++){let c=o[a];n.push(new Z({id:c.id,project:e,created:new Date(c.created),modified:new Date(c.modified),complete:c.complete,time:c.time,report:c.report}))}return n}};P.urlDeprectionWarning='"url" field is deprecated, use "name" or "urls" instead.';var W=class{constructor(){let e=document.body;e.addEventListener("touchstart",t=>{this.proxyToContainer(t)},{passive:!0}),e.addEventListener("touchend",t=>{this.proxyToContainer(t)},{passive:!0}),e.addEventListener("touchmove",t=>{this.proxyToContainer(t)},{passive:!0})}async proxyToContainer(e){var t;let s,n=(t=e.touches)!==null&&t!==void 0?t:e.changedTouches;if(e.touches.length===1)s=e.touches[0];else if(e.changedTouches.length===1)s=e.changedTouches[0];else return;let a={target:"interrobot",data:{reportTouch:{identifier:null,target:null,clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,radiusX:s.radiusX,radiusY:s.radiusY,rotationAngle:s.rotationAngle,force:s.force,eventType:e.type}}};window.parent.postMessage(a,"*")}async touchEnd(e){}async touchMove(e){}};var F;(function(E){E[E.Light=0]="Light",E[E.Dark=1]="Dark"})(F||(F={}));var J=class{constructor(e,t){this.iframeSrc=e,t?this.hostOrigin=t:this.hostOrigin="";let s=new URL(e);e==="about:srcdoc"?this.pluginOrigin="about:srcdoc":this.pluginOrigin=s.origin}getIframeSrc(){return this.iframeSrc}getHostOrigin(){return this.hostOrigin}getPluginOrigin(){return this.pluginOrigin}toString(){return`host = ${this.hostOrigin}; plugin = ${this.pluginOrigin}`}},b=class{static async initialize(e){let t=()=>{let s=new e;return b.postMeta(s.constructor.meta),window.addEventListener("load",()=>b.postContentHeight()),window.addEventListener("resize",()=>b.postContentHeight()),s};return document.readyState==="complete"||document.readyState==="interactive"?t():new Promise(s=>{document.addEventListener("DOMContentLoaded",()=>{s(t())})})}static postContentHeight(e=null){let t=document.querySelector(".main__results"),s=document.body.scrollHeight;if(t&&(s=Number(t.getBoundingClientRect().bottom)),s!==b.contentScrollHeight){let o={target:"interrobot",data:{reportHeight:e&&e>=1?Math.min(e,s):s}};b.routeMessage(o)}}static postOpenResourceLink(e,t){let s={target:"interrobot",data:{reportLink:{openInBrowser:t,resource:e}}};b.routeMessage(s)}static postMeta(e){let t={target:"interrobot",data:{reportMeta:e}};b.routeMessage(t)}static async postApiRequest(e,t){let s=null;return await(async()=>new Promise(o=>{let a=async u=>{var l;if(u===void 0)return;let r=u.data,d=(l=r.data)!==null&&l!==void 0?l:{};if(d&&typeof d=="object"&&d.hasOwnProperty("apiResponse")){let i=d.apiResponse.__meta__.request.method;e===i&&(s=r.data.apiResponse,window.removeEventListener("message",a),o())}},c={target:"interrobot",data:{apiRequest:{method:e,kwargs:t}}};window.addEventListener("message",a),b.routeMessage(c)}))(),s}static logTiming(e,t){let s=(t/1e3).toFixed(3);console.log(`\u{1F916} [${s}s] ${e}`)}static logWarning(e,t=null){let s=t?`
${t}`:"";console.warn(`\u{1F916} ${e}${s}`)}static routeMessage(e){let t="";b.connection?(t=b.connection.getHostOrigin(),window.parent.postMessage(e,t)):window.parent.postMessage(e)}static GetStaticBasePath(){function e(){if("userAgentData"in navigator&&navigator.userAgentData)return navigator.userAgentData.platform.toLowerCase()==="linux";{let t=navigator.userAgent.toLowerCase();return t.includes("android")||t.includes("cros")?!1:t.includes("linux")}}return e()?"":"/_content/Interrobot.Common"}constructor(){this.projectId=-1,this.mode=F.Light;let e,t,s;if(this.parentIsOrigin()){let a=window.parent.document.getElementById("report");e=parseInt(a.dataset.project,10),t=parseInt(a.dataset.mode,10),s=a.dataset.origin}else{let a=new URLSearchParams(window.location.search);e=parseInt(a.get("project"),10),t=parseInt(a.get("mode"),10),s=a.get("origin")}if(b.connection=new J(document.location.href,s),isNaN(e)){let a="missing project url argument";throw new Error(a)}this.data=null,this.projectId=e,this.mode=isNaN(t)||t!==1?F.Light:F.Dark,b.contentScrollHeight=0;let n=F[this.mode].toLowerCase();document.body.classList.remove("light","dark"),document.body.classList.add(n);let o=new W}delay(e){return new Promise(t=>setTimeout(t,e))}getMode(){return this.mode}getProjectId(){return this.projectId}getInstanceMeta(){return this.constructor.meta}async initData(e,t){this.data=new V({projectId:this.getProjectId(),meta:this.getInstanceMeta(),defaultData:e,autoformInputs:t}),await this.data.loadData()}async initAndGetData(e,t){return await this.initData(e,t),this.data}async getProject(){if(this.project===void 0){let e=await P.getApiProject(this.projectId);if(e===null){let t=`project id=${this.projectId} not found`;throw new Error(t)}this.project=e}return this.project}render(e){document.body.innerHTML=e}async index(){let e=await P.getApiProject(this.getProjectId()),t=f.htmlEncode(e.getDisplayTitle()),s=f.htmlEncode(b.meta.title);this.render(`
            <div class="main__heading">
                <div class="main__heading__icon">
                    <img id="projectIcon" src="${e.getImageDataUri()}" alt="Icon for ${t}" />
                </div>
                <div class="main__heading__title">
                    <h1>${s}</h1>
                    <div><span>${t}</span></div>
                </div>
            </div>
            <div class="main__form">
                <p>Welcome, from the index() of the Plugin base-class. This page exists as a placeholder, 
                but in your hands it could be so much more. The Example Report form below will count and 
                present page title terms used across the website, by count.
                It's an example to help get you started.</p>
                <p>If you have any questions, please reach out to the dev via the in-app contact form.</p>
                <form><button>Example Report</button></form>
            </div>
            <div class="main__results"></div>`),document.getElementsByTagName("button")[0].addEventListener("click",async o=>{await this.process()})}async process(){let e=new Map,t,s=async(l,r)=>{let d=l.name.trim().split(/[\s\-â€”]+/g);for(let i of d)if(!r.has(i))r.set(i,1);else{let h=r.get(i);r.set(i,h+1)}},n=this.getProjectId(),o="headers: text/html",a=["name"],c=new $({project:n,query:o,fields:a,type:N.Any,includeExternal:!1,includeNoRobots:!1}),u={paginate:!0,showProgress:!1,progressMessage:"Processing\u2026"};await M.execute(c,t,async l=>{await s(l,e)},u),await this.report(e)}async report(e){let t=new Map([...e.entries()].sort((o,a)=>{let c=o[1],u=a[1];return c===u?o[0].toLowerCase().localeCompare(a[0].toLowerCase()):u-c})),s=[];for(let o of t.keys()){let a=t.get(o),c=o.length>24?o.substring(24)+"\u2026":o;s.push(`<tr><td>${f.htmlEncode(c)}</td><td>${a.toLocaleString()}</td></tr>`)}let n=document.querySelector(".main__results");n.innerHTML=s.length===0?"<p>No results found.</p>":`<div><section><table style="max-width:340px">
            <thead><tr><th>Term</th><th>Count</th></tr></thead>
            <tbody>${s.join("")}</tbody>
            </table></section></div>`,b.postContentHeight()}parentIsOrigin(){try{if(!window.parent||window.parent===window)return!1;let e=window.parent.document;return e?!e.hidden:!1}catch{return!1}}};b.meta={title:"InterroBot Base Plugin",category:"Example",version:"1.0",author:"InterroBot",description:`Welcome to InterroBot plugin development. This base-class Plugin can already 
        query the database, draw conclusions, and report back. It's just few tweaks away from being 
        your own creation.

This is the default plugin description. Set meta: {} values
        in the source to update these display values.`};var _=class{static createElement(e,t){let s=new _(t),n=s.getBaseElement();return e&&n?e.appendChild(n):console.warn(`unable to create processing widget: parent [${e}], base [${n}]`),s}constructor(e){this.prefix=e,this.total=0,this.loaded=0,this.active=!0,this.baseElement=document.createElement("div"),this.baseElement.id="processingWidget",this.baseElement.classList.add("processing","hidden"),this.baseElement.innerHTML="",document.addEventListener("SearchResultHandled",async t=>{if(this.active===!1)return;let s=t.detail.resultTotal,n=t.detail.resultNum,o=Math.ceil(n/s*100),a=Math.ceil(this.loaded/this.total*100);if(o>100||a===100){this.baseElement.classList.remove("throbbing");return}this.total=s,this.loaded=n,this.baseElement.innerHTML=o>100?"":`${this.prefix}
                <span class="resultNum">##</span>/<span class="resultTotal">##</span>
                (<span class="percentTotal">##</span>)`;let c=this.baseElement.querySelector(".resultNum");c&&(c.innerText=`${t.detail.resultNum.toLocaleString()}`);let u=this.baseElement.querySelector(".resultTotal");u&&(u.innerText=`${t.detail.resultTotal.toLocaleString()}`);let l=this.baseElement.querySelector(".percentTotal");l&&(l.innerText=`${o}%`),[0,100].indexOf(o)>=0?this.baseElement.classList.remove("throbbing"):this.baseElement.classList.add("throbbing")}),document.addEventListener("ProcessingMessage",async t=>{if(this.active===!1)return;switch(t.detail.action){case"set":this.baseElement.innerHTML="",this.baseElement.innerText=t.detail.message,this.baseElement.classList.add("throbbing");break;case"clear":default:this.baseElement.classList.remove("throbbing");break}})}clearMessage(){this.baseElement.classList.remove("throbbing")}getBaseElement(){return this.baseElement}setPrefix(e){this.prefix=e}setMessage(e){this.baseElement.innerHTML=`${e}`,this.baseElement.classList.add("throbbing")}setActive(e){this.active=e}};var H=class{static standardHeading(e,t){return`<div class="main__heading">
            <div class="main__heading__icon">
                <img id="projectIcon" src="${e.getImageDataUri()}" alt="Icon for @crawlView.DisplayTitle" />
            </div>
            <div class="main__heading__title">
                <h1><span>${f.htmlEncode(t)}</span></h1>
                <div><span>${f.htmlEncode(e.getDisplayTitle())}</span></div>
            </div>
        </div>`}static standardForm(e){return`<div class="main__form">${e}</div>`}static standardResults(){return'<div class="main__results"></div>'}static standardCheckbox(e,t,s,n){return`
        <label>
            <span class="checkbox">
                <input type="checkbox" name="${f.htmlEncode(e)}" value="${f.htmlEncode(t)}"/>
                <span class="checkbox__tick"></span>                                
            </span>
            <span class="checkbox__label">${f.htmlEncode(s)}</span> 
            ${n?'<span class="checkbox__synopsis">'+f.htmlEncode(n)+"</span>":""}
        </label>`}static standardRadio(e,t,s,n){return`        
        <label>
            <span class="radio">
                <input type="radio" name="${f.htmlEncode(e)}" value="${f.htmlEncode(t)}">
                <span class="radio__tick"></span>
            </span>
            <span class="radio__text">${f.htmlEncode(s)}</span>
            ${n?'<span class="radio__synopsis">'+f.htmlEncode(n)+"</span>":""}
        </label>`}static cellRendererSameAsLast(e,t,s){var n;if(!("ID"in t))throw"ID must be present to use cellHandlerSameAsLast";let o=Object.keys(t),c=Object.values(t).indexOf(e),u=o[c],l=t.ID.toString(),r=(n=H.cellHandlerSameAsLastMemo[u])!==null&&n!==void 0?n:"",d=[];return s>0&&r===l&&d.push("sameaslast"),H.cellHandlerSameAsLastMemo[u]=l,{classes:d,content:`${f.htmlEncode(e)}`}}static cellRendererSameAsLastLink(e,t,s){let n=H.cellRendererSameAsLast(e,t,s);return n.content=`<a tabindex="0" class= "ulink" 
            data-id="${f.htmlEncode(t.ID)}" 
            href="${f.htmlEncode(e)}">${f.htmlEncode(e)}</a>`,n}static cellRendererLinkedId(e,t,s){let n=new URLSearchParams(window.location.search),o=Object.fromEntries(n.entries()),a=o.origin,c=o.project;if(!a||!c)throw"missing required url arguments";let u=`${a}/search/${c}/resource/${e}/`;return{classes:[],content:`<a tabindex="0" href="${f.htmlEncode(u)}"
                data-id="${f.htmlEncode(t.ID)}" 
                class="ulink">${f.htmlEncode(e)}</a>`}}static cellRendererWrappedContent(e,t,s){return{classes:["wrap"],content:`${f.htmlEncode(e)}`}}};H.cellHandlerSameAsLastMemo={};var X=class{static getStopwordsTruth(e){return this.getStopwords(e).reduce((s,n,o)=>({...s,[n]:!0}),{})}static getStopwords(e){switch(e){case"da":return["og","i","jeg","det","at","en","den","til","er","som","p\xE5","de","med","han","af","for","ikke","der","var","mig","sig","men","et","har","om","vi","min","havde","ham","hun","nu","over","da","fra","du","ud","sin","dem","os","op","man","hans","hvor","eller","hvad","skal","selv","her","alle","vil","blev","kunne","ind","n\xE5r","v\xE6re","dog","noget","ville","jo","deres","efter","ned","skulle","denne","end","dette","mit","ogs\xE5","under","have","dig","anden","hende","mine","alt","meget","sit","sine","vor","mod","disse","hvis","din","nogle","hos","blive","mange","ad","bliver","hendes","v\xE6ret","thi","jer","s\xE5dan"];case"nl":return["de","en","van","ik","te","dat","die","in","een","hij","het","niet","zijn","is","was","op","aan","met","als","voor","had","er","maar","om","hem","dan","zou","of","wat","mijn","men","dit","zo","door","over","ze","zich","bij","ook","tot","je","mij","uit","der","daar","haar","naar","heb","hoe","heeft","hebben","deze","u","want","nog","zal","me","zij","nu","ge","geen","omdat","iets","worden","toch","al","waren","veel","meer","doen","toen","moet","ben","zonder","kan","hun","dus","alles","onder","ja","eens","hier","wie","werd","altijd","doch","wordt","wezen","kunnen","ons","zelf","tegen","na","reeds","wil","kon","niets","uw","iemand","geweest","andere"];case"en":return["i","me","my","myself","we","our","ours","ourselves","you","you're","you've","you'll","you'd","your","yours","yourself","yourselves","he","him","his","himself","she","she's","her","hers","herself","it","it's","its","itself","they","them","their","theirs","themselves","what","which","who","whom","this","that","that'll","these","those","am","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","a","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","don't","should","should've","now","d","ll","m","o","re","ve","y","ain","aren","aren't","couldn","couldn't","didn","didn't","doesn","doesn't","hadn","hadn't","hasn","hasn't","haven","haven't","isn","isn't","ma","mightn","mightn't","mustn","mustn't","needn","needn't","shan","shan't","shouldn","shouldn't","wasn","wasn't","weren","weren't","won","won't","wouldn","wouldn't"];case"fi":return["olla","olen","olet","on","olemme","olette","ovat","ole","oli","olisi","olisit","olisin","olisimme","olisitte","olisivat","olit","olin","olimme","olitte","olivat","ollut","olleet","en","et","ei","emme","ette","eiv\xE4t","min\xE4","minun","minut","minua","minussa","minusta","minuun","minulla","minulta","minulle","sin\xE4","sinun","sinut","sinua","sinussa","sinusta","sinuun","sinulla","sinulta","sinulle","h\xE4n","h\xE4nen","h\xE4net","h\xE4nt\xE4","h\xE4ness\xE4","h\xE4nest\xE4","h\xE4neen","h\xE4nell\xE4","h\xE4nelt\xE4","h\xE4nelle","me","meid\xE4n","meid\xE4t","meit\xE4","meiss\xE4","meist\xE4","meihin","meill\xE4","meilt\xE4","meille","te","teid\xE4n","teid\xE4t","teit\xE4","teiss\xE4","teist\xE4","teihin","teill\xE4","teilt\xE4","teille","he","heid\xE4n","heid\xE4t","heit\xE4","heiss\xE4","heist\xE4","heihin","heill\xE4","heilt\xE4","heille","t\xE4m\xE4","t\xE4m\xE4n","t\xE4t\xE4","t\xE4ss\xE4","t\xE4st\xE4","t\xE4h\xE4n","tall\xE4","t\xE4lt\xE4","t\xE4lle","t\xE4n\xE4","t\xE4ksi","tuo","tuon","tuot\xE4","tuossa","tuosta","tuohon","tuolla","tuolta","tuolle","tuona","tuoksi","se","sen","sit\xE4","siin\xE4","siit\xE4","siihen","sill\xE4","silt\xE4","sille","sin\xE4","siksi","n\xE4m\xE4","n\xE4iden","n\xE4it\xE4","n\xE4iss\xE4","n\xE4ist\xE4","n\xE4ihin","n\xE4ill\xE4","n\xE4ilt\xE4","n\xE4ille","n\xE4in\xE4","n\xE4iksi","nuo","noiden","noita","noissa","noista","noihin","noilla","noilta","noille","noina","noiksi","ne","niiden","niit\xE4","niiss\xE4","niist\xE4","niihin","niill\xE4","niilt\xE4","niille","niin\xE4","niiksi","kuka","kenen","kenet","ket\xE4","keness\xE4","kenest\xE4","keneen","kenell\xE4","kenelt\xE4","kenelle","kenen\xE4","keneksi","ketk\xE4","keiden","ketk\xE4","keit\xE4","keiss\xE4","keist\xE4","keihin","keill\xE4","keilt\xE4","keille","kein\xE4","keiksi","mik\xE4","mink\xE4","mink\xE4","mit\xE4","miss\xE4","mist\xE4","mihin","mill\xE4","milt\xE4","mille","min\xE4","miksi","mitk\xE4","joka","jonka","jota","jossa","josta","johon","jolla","jolta","jolle","jona","joksi","jotka","joiden","joita","joissa","joista","joihin","joilla","joilta","joille","joina","joiksi","ett\xE4","ja","jos","koska","kuin","mutta","niin","sek\xE4","sill\xE4","tai","vaan","vai","vaikka","kanssa","mukaan","noin","poikki","yli","kun","niin","nyt","itse"];case"fr":return["au","aux","avec","ce","ces","dans","de","des","du","elle","en","et","eux","il","ils","je","la","le","les","leur","lui","ma","mais","me","m\xEAme","mes","moi","mon","ne","nos","notre","nous","on","ou","par","pas","pour","qu","que","qui","sa","se","ses","son","sur","ta","te","tes","toi","ton","tu","un","une","vos","votre","vous","c","d","j","l","\xE0","m","n","s","t","y","\xE9t\xE9","\xE9t\xE9e","\xE9t\xE9es","\xE9t\xE9s","\xE9tant","\xE9tante","\xE9tants","\xE9tantes","suis","es","est","sommes","\xEAtes","sont","serai","seras","sera","serons","serez","seront","serais","serait","serions","seriez","seraient","\xE9tais","\xE9tait","\xE9tions","\xE9tiez","\xE9taient","fus","fut","f\xFBmes","f\xFBtes","furent","sois","soit","soyons","soyez","soient","fusse","fusses","f\xFBt","fussions","fussiez","fussent","ayant","ayante","ayantes","ayants","eu","eue","eues","eus","ai","as","avons","avez","ont","aurai","auras","aura","aurons","aurez","auront","aurais","aurait","aurions","auriez","auraient","avais","avait","avions","aviez","avaient","eut","e\xFBmes","e\xFBtes","eurent","aie","aies","ait","ayons","ayez","aient","eusse","eusses","e\xFBt","eussions","eussiez","eussent"];case"de":return["aber","alle","allem","allen","aller","alles","als","also","am","an","ander","andere","anderem","anderen","anderer","anderes","anderm","andern","anderr","anders","auch","auf","aus","bei","bin","bis","bist","da","damit","dann","der","den","des","dem","die","das","dass","da\xDF","derselbe","derselben","denselben","desselben","demselben","dieselbe","dieselben","dasselbe","dazu","dein","deine","deinem","deinen","deiner","deines","denn","derer","dessen","dich","dir","du","dies","diese","diesem","diesen","dieser","dieses","doch","dort","durch","ein","eine","einem","einen","einer","eines","einig","einige","einigem","einigen","einiger","einiges","einmal","er","ihn","ihm","es","etwas","euer","eure","eurem","euren","eurer","eures","f\xFCr","gegen","gewesen","hab","habe","haben","hat","hatte","hatten","hier","hin","hinter","ich","mich","mir","ihr","ihre","ihrem","ihren","ihrer","ihres","euch","im","in","indem","ins","ist","jede","jedem","jeden","jeder","jedes","jene","jenem","jenen","jener","jenes","jetzt","kann","kein","keine","keinem","keinen","keiner","keines","k\xF6nnen","k\xF6nnte","machen","man","manche","manchem","manchen","mancher","manches","mein","meine","meinem","meinen","meiner","meines","mit","muss","musste","nach","nicht","nichts","noch","nun","nur","ob","oder","ohne","sehr","sein","seine","seinem","seinen","seiner","seines","selbst","sich","sie","ihnen","sind","so","solche","solchem","solchen","solcher","solches","soll","sollte","sondern","sonst","\xFCber","um","und","uns","unsere","unserem","unseren","unser","unseres","unter","viel","vom","von","vor","w\xE4hrend","war","waren","warst","was","weg","weil","weiter","welche","welchem","welchen","welcher","welches","wenn","werde","werden","wie","wieder","will","wir","wird","wirst","wo","wollen","wollte","w\xFCrde","w\xFCrden","zu","zum","zur","zwar","zwischen"];case"hu":return["a","ahogy","ahol","aki","akik","akkor","alatt","\xE1ltal","\xE1ltal\xE1ban","amely","amelyek","amelyekben","amelyeket","amelyet","amelynek","ami","amit","amolyan","am\xEDg","amikor","\xE1t","abban","ahhoz","annak","arra","arr\xF3l","az","azok","azon","azt","azzal","az\xE9rt","azt\xE1n","azut\xE1n","azonban","b\xE1r","be","bel\xFCl","benne","cikk","cikkek","cikkeket","csak","de","e","eddig","eg\xE9sz","egy","egyes","egyetlen","egy\xE9b","egyik","egyre","ekkor","el","el\xE9g","ellen","el\xF5","el\xF5sz\xF6r","el\xF5tt","els\xF5","\xE9n","\xE9ppen","ebben","ehhez","emilyen","ennek","erre","ez","ezt","ezek","ezen","ezzel","ez\xE9rt","\xE9s","fel","fel\xE9","hanem","hiszen","hogy","hogyan","igen","\xEDgy","illetve","ill.","ill","ilyen","ilyenkor","ison","ism\xE9t","itt","j\xF3","j\xF3l","jobban","kell","kellett","kereszt\xFCl","keress\xFCnk","ki","k\xEDv\xFCl","k\xF6z\xF6tt","k\xF6z\xFCl","legal\xE1bb","lehet","lehetett","legyen","lenne","lenni","lesz","lett","maga","mag\xE1t","majd","majd","m\xE1r","m\xE1s","m\xE1sik","meg","m\xE9g","mellett","mert","mely","melyek","mi","mit","m\xEDg","mi\xE9rt","milyen","mikor","minden","mindent","mindenki","mindig","mint","mintha","mivel","most","nagy","nagyobb","nagyon","ne","n\xE9ha","nekem","neki","nem","n\xE9h\xE1ny","n\xE9lk\xFCl","nincs","olyan","ott","\xF6ssze","\xF5","\xF5k","\xF5ket","pedig","persze","r\xE1","s","saj\xE1t","sem","semmi","sok","sokat","sokkal","sz\xE1m\xE1ra","szemben","szerint","szinte","tal\xE1n","teh\xE1t","teljes","tov\xE1bb","tov\xE1bb\xE1","t\xF6bb","\xFAgy","ugyanis","\xFAj","\xFAjabb","\xFAjra","ut\xE1n","ut\xE1na","utols\xF3","vagy","vagyis","valaki","valami","valamint","val\xF3","vagyok","van","vannak","volt","voltam","voltak","voltunk","vissza","vele","viszont","volna"];case"it":return["ad","al","allo","ai","agli","all","agl","alla","alle","con","col","coi","da","dal","dallo","dai","dagli","dall","dagl","dalla","dalle","di","del","dello","dei","degli","dell","degl","della","delle","in","nel","nello","nei","negli","nell","negl","nella","nelle","su","sul","sullo","sui","sugli","sull","sugl","sulla","sulle","per","tra","contro","io","tu","lui","lei","noi","voi","loro","mio","mia","miei","mie","tuo","tua","tuoi","tue","suo","sua","suoi","sue","nostro","nostra","nostri","nostre","vostro","vostra","vostri","vostre","mi","ti","ci","vi","lo","la","li","le","gli","ne","il","un","uno","una","ma","ed","se","perch\xE9","anche","come","dov","dove","che","chi","cui","non","pi\xF9","quale","quanto","quanti","quanta","quante","quello","quelli","quella","quelle","questo","questi","questa","queste","si","tutto","tutti","a","c","e","i","l","o","ho","hai","ha","abbiamo","avete","hanno","abbia","abbiate","abbiano","avr\xF2","avrai","avr\xE0","avremo","avrete","avranno","avrei","avresti","avrebbe","avremmo","avreste","avrebbero","avevo","avevi","aveva","avevamo","avevate","avevano","ebbi","avesti","ebbe","avemmo","aveste","ebbero","avessi","avesse","avessimo","avessero","avendo","avuto","avuta","avuti","avute","sono","sei","\xE8","siamo","siete","sia","siate","siano","sar\xF2","sarai","sar\xE0","saremo","sarete","saranno","sarei","saresti","sarebbe","saremmo","sareste","sarebbero","ero","eri","era","eravamo","eravate","erano","fui","fosti","fu","fummo","foste","furono","fossi","fosse","fossimo","fossero","essendo","faccio","fai","facciamo","fanno","faccia","facciate","facciano","far\xF2","farai","far\xE0","faremo","farete","faranno","farei","faresti","farebbe","faremmo","fareste","farebbero","facevo","facevi","faceva","facevamo","facevate","facevano","feci","facesti","fece","facemmo","faceste","fecero","facessi","facesse","facessimo","facessero","facendo","sto","stai","sta","stiamo","stanno","stia","stiate","stiano","star\xF2","starai","star\xE0","staremo","starete","staranno","starei","staresti","starebbe","staremmo","stareste","starebbero","stavo","stavi","stava","stavamo","stavate","stavano","stetti","stesti","stette","stemmo","steste","stettero","stessi","stesse","stessimo","stessero","stando"];case"no":return["og","i","jeg","det","at","en","et","den","til","er","som","p\xE5","de","med","han","av","ikke","ikkje","der","s\xE5","var","meg","seg","men","ett","har","om","vi","min","mitt","ha","hadde","hun","n\xE5","over","da","ved","fra","du","ut","sin","dem","oss","opp","man","kan","hans","hvor","eller","hva","skal","selv","sj\xF8l","her","alle","vil","bli","ble","blei","blitt","kunne","inn","n\xE5r","v\xE6re","kom","noen","noe","ville","dere","som","deres","kun","ja","etter","ned","skulle","denne","for","deg","si","sine","sitt","mot","\xE5","meget","hvorfor","dette","disse","uten","hvordan","ingen","din","ditt","blir","samme","hvilken","hvilke","s\xE5nn","inni","mellom","v\xE5r","hver","hvem","vors","hvis","b\xE5de","bare","enn","fordi","f\xF8r","mange","ogs\xE5","slik","v\xE6rt","v\xE6re","b\xE5e","begge","siden","dykk","dykkar","dei","deira","deires","deim","di","d\xE5","eg","ein","eit","eitt","elles","honom","hj\xE5","ho","hoe","henne","hennar","hennes","hoss","hossen","ikkje","ingi","inkje","korleis","korso","kva","kvar","kvarhelst","kven","kvi","kvifor","me","medan","mi","mine","mykje","no","nokon","noka","nokor","noko","nokre","si","sia","sidan","so","somt","somme","um","upp","vere","vore","verte","vort","varte","vart"];case"pt":return["a","\xE0","ao","aos","aquela","aquelas","aquele","aqueles","aquilo","as","\xE0s","at\xE9","com","como","da","das","de","dela","delas","dele","deles","depois","do","dos","e","\xE9","ela","elas","ele","eles","em","entre","era","eram","\xE9ramos","essa","essas","esse","esses","esta","est\xE1","estamos","est\xE3o","estar","estas","estava","estavam","est\xE1vamos","este","esteja","estejam","estejamos","estes","esteve","estive","estivemos","estiver","estivera","estiveram","estiv\xE9ramos","estiverem","estivermos","estivesse","estivessem","estiv\xE9ssemos","estou","eu","foi","fomos","for","fora","foram","f\xF4ramos","forem","formos","fosse","fossem","f\xF4ssemos","fui","h\xE1","haja","hajam","hajamos","h\xE3o","havemos","haver","hei","houve","houvemos","houver","houvera","houver\xE1","houveram","houv\xE9ramos","houver\xE3o","houverei","houverem","houveremos","houveria","houveriam","houver\xEDamos","houvermos","houvesse","houvessem","houv\xE9ssemos","isso","isto","j\xE1","lhe","lhes","mais","mas","me","mesmo","meu","meus","minha","minhas","muito","na","n\xE3o","nas","nem","no","nos","n\xF3s","nossa","nossas","nosso","nossos","num","numa","o","os","ou","para","pela","pelas","pelo","pelos","por","qual","quando","que","quem","s\xE3o","se","seja","sejam","sejamos","sem","ser","ser\xE1","ser\xE3o","serei","seremos","seria","seriam","ser\xEDamos","seu","seus","s\xF3","somos","sou","sua","suas","tamb\xE9m","te","tem","t\xE9m","temos","tenha","tenham","tenhamos","tenho","ter\xE1","ter\xE3o","terei","teremos","teria","teriam","ter\xEDamos","teu","teus","teve","tinha","tinham","t\xEDnhamos","tive","tivemos","tiver","tivera","tiveram","tiv\xE9ramos","tiverem","tivermos","tivesse","tivessem","tiv\xE9ssemos","tu","tua","tuas","um","uma","voc\xEA","voc\xEAs","vos"];case"ro":return["a","abia","acea","aceasta","aceast\u0103","aceea","aceeasi","acei","aceia","acel","acela","acelasi","acele","acelea","acest","acesta","aceste","acestea","acestei","acestia","acestui","ace\u015Fti","ace\u015Ftia","adica","ai","aia","aib\u0103","aici","al","ala","ale","alea","alt","alta","altceva","altcineva","alte","altfel","alti","altii","altul","am","anume","apoi","ar","are","as","asa","asta","astea","astfel","asupra","atare","atat","atata","atatea","atatia","ati","atit","atita","atitea","atitia","atunci","au","avea","avem","ave\u0163i","avut","a\u015F","a\u0163i","ba","ca","cam","cand","care","careia","carora","caruia","cat","catre","ce","cea","ceea","cei","ceilalti","cel","cele","celor","ceva","chiar","ci","cind","cine","cineva","cit","cita","cite","citeva","citi","citiva","cu","cui","cum","cumva","c\xE2t","c\xE2te","c\xE2tva","c\xE2\u0163i","c\xEEnd","c\xEEt","c\xEEte","c\xEEtva","c\xEE\u0163i","c\u0103","c\u0103ci","c\u0103rei","c\u0103ror","c\u0103rui","c\u0103tre","da","daca","dac\u0103","dar","dat","dat\u0103","dau","de","deasupra","deci","decit","deja","desi","despre","de\u015Fi","din","dintr","dintr-","dintre","doar","doi","doilea","dou\u0103","drept","dupa","dup\u0103","d\u0103","e","ea","ei","el","ele","era","eram","este","eu","e\u015Fti","face","fara","fata","fel","fi","fie","fiecare","fii","fim","fiu","fi\u0163i","foarte","fost","f\u0103r\u0103","i","ia","iar","ii","il","imi","in","inainte","inapoi","inca","incit","insa","intr","intre","isi","iti","la","le","li","lor","lui","l\xE2ng\u0103","l\xEEng\u0103","m","ma","mai","mea","mei","mele","mereu","meu","mi","mie","mine","mod","mult","multa","multe","multi","mult\u0103","mul\u0163i","m\xE2ine","m\xEEine","m\u0103","ne","ni","nici","nimeni","nimic","niste","ni\u015Fte","noastre","noastr\u0103","noi","nostri","nostru","nou","noua","nou\u0103","no\u015Ftri","nu","numai","o","or","ori","oricare","orice","oricine","oricum","oric\xE2nd","oric\xE2t","oric\xEEnd","oric\xEEt","oriunde","pai","parca","patra","patru","pe","pentru","peste","pic","pina","poate","pot","prea","prima","primul","prin","printr-","putini","pu\u0163in","pu\u0163ina","pu\u0163in\u0103","p\xE2n\u0103","p\xEEn\u0103","sa","sa-mi","sa-ti","sai","sale","sau","se","si","sint","sintem","spate","spre","sub","sunt","suntem","sunte\u0163i","sus","s\u0103","s\u0103i","s\u0103u","t","ta","tale","te","ti","tine","toata","toate","toat\u0103","tocmai","tot","toti","totul","totusi","totu\u015Fi","to\u0163i","trei","treia","treilea","tu","tuturor","t\u0103i","t\u0103u","u","ul","ului","un","una","unde","undeva","unei","uneia","unele","uneori","unii","unor","unora","unu","unui","unuia","unul","v","va","vi","voastre","voastr\u0103","voi","vom","vor","vostru","vou\u0103","vo\u015Ftri","vreo","vreun","v\u0103","zi","zice","\xEEi","\xEEl","\xEEmi","\xEEn","\xEE\u0163i","\u0103la","\u0103lea","\u0103sta","\u0103stea","\u0103\u015Ftia","\u015Fi","\u0163i","\u0163ie"];case"ru":return["\u0438","\u0432","\u0432\u043E","\u043D\u0435","\u0447\u0442\u043E","\u043E\u043D","\u043D\u0430","\u044F","\u0441","\u0441\u043E","\u043A\u0430\u043A","\u0430","\u0442\u043E","\u0432\u0441\u0435","\u043E\u043D\u0430","\u0442\u0430\u043A","\u0435\u0433\u043E","\u043D\u043E","\u0434\u0430","\u0442\u044B","\u043A","\u0443","\u0436\u0435","\u0432\u044B","\u0437\u0430","\u0431\u044B","\u043F\u043E","\u0442\u043E\u043B\u044C\u043A\u043E","\u0435\u0435","\u043C\u043D\u0435","\u0431\u044B\u043B\u043E","\u0432\u043E\u0442","\u043E\u0442","\u043C\u0435\u043D\u044F","\u0435\u0449\u0435","\u043D\u0435\u0442","\u043E","\u0438\u0437","\u0435\u043C\u0443","\u0442\u0435\u043F\u0435\u0440\u044C","\u043A\u043E\u0433\u0434\u0430","\u0434\u0430\u0436\u0435","\u043D\u0443","\u0432\u0434\u0440\u0443\u0433","\u043B\u0438","\u0435\u0441\u043B\u0438","\u0443\u0436\u0435","\u0438\u043B\u0438","\u043D\u0438","\u0431\u044B\u0442\u044C","\u0431\u044B\u043B","\u043D\u0435\u0433\u043E","\u0434\u043E","\u0432\u0430\u0441","\u043D\u0438\u0431\u0443\u0434\u044C","\u043E\u043F\u044F\u0442\u044C","\u0443\u0436","\u0432\u0430\u043C","\u0432\u0435\u0434\u044C","\u0442\u0430\u043C","\u043F\u043E\u0442\u043E\u043C","\u0441\u0435\u0431\u044F","\u043D\u0438\u0447\u0435\u0433\u043E","\u0435\u0439","\u043C\u043E\u0436\u0435\u0442","\u043E\u043D\u0438","\u0442\u0443\u0442","\u0433\u0434\u0435","\u0435\u0441\u0442\u044C","\u043D\u0430\u0434\u043E","\u043D\u0435\u0439","\u0434\u043B\u044F","\u043C\u044B","\u0442\u0435\u0431\u044F","\u0438\u0445","\u0447\u0435\u043C","\u0431\u044B\u043B\u0430","\u0441\u0430\u043C","\u0447\u0442\u043E\u0431","\u0431\u0435\u0437","\u0431\u0443\u0434\u0442\u043E","\u0447\u0435\u0433\u043E","\u0440\u0430\u0437","\u0442\u043E\u0436\u0435","\u0441\u0435\u0431\u0435","\u043F\u043E\u0434","\u0431\u0443\u0434\u0435\u0442","\u0436","\u0442\u043E\u0433\u0434\u0430","\u043A\u0442\u043E","\u044D\u0442\u043E\u0442","\u0442\u043E\u0433\u043E","\u043F\u043E\u0442\u043E\u043C\u0443","\u044D\u0442\u043E\u0433\u043E","\u043A\u0430\u043A\u043E\u0439","\u0441\u043E\u0432\u0441\u0435\u043C","\u043D\u0438\u043C","\u0437\u0434\u0435\u0441\u044C","\u044D\u0442\u043E\u043C","\u043E\u0434\u0438\u043D","\u043F\u043E\u0447\u0442\u0438","\u043C\u043E\u0439","\u0442\u0435\u043C","\u0447\u0442\u043E\u0431\u044B","\u043D\u0435\u0435","\u0441\u0435\u0439\u0447\u0430\u0441","\u0431\u044B\u043B\u0438","\u043A\u0443\u0434\u0430","\u0437\u0430\u0447\u0435\u043C","\u0432\u0441\u0435\u0445","\u043D\u0438\u043A\u043E\u0433\u0434\u0430","\u043C\u043E\u0436\u043D\u043E","\u043F\u0440\u0438","\u043D\u0430\u043A\u043E\u043D\u0435\u0446","\u0434\u0432\u0430","\u043E\u0431","\u0434\u0440\u0443\u0433\u043E\u0439","\u0445\u043E\u0442\u044C","\u043F\u043E\u0441\u043B\u0435","\u043D\u0430\u0434","\u0431\u043E\u043B\u044C\u0448\u0435","\u0442\u043E\u0442","\u0447\u0435\u0440\u0435\u0437","\u044D\u0442\u0438","\u043D\u0430\u0441","\u043F\u0440\u043E","\u0432\u0441\u0435\u0433\u043E","\u043D\u0438\u0445","\u043A\u0430\u043A\u0430\u044F","\u043C\u043D\u043E\u0433\u043E","\u0440\u0430\u0437\u0432\u0435","\u0442\u0440\u0438","\u044D\u0442\u0443","\u043C\u043E\u044F","\u0432\u043F\u0440\u043E\u0447\u0435\u043C","\u0445\u043E\u0440\u043E\u0448\u043E","\u0441\u0432\u043E\u044E","\u044D\u0442\u043E\u0439","\u043F\u0435\u0440\u0435\u0434","\u0438\u043D\u043E\u0433\u0434\u0430","\u043B\u0443\u0447\u0448\u0435","\u0447\u0443\u0442\u044C","\u0442\u043E\u043C","\u043D\u0435\u043B\u044C\u0437\u044F","\u0442\u0430\u043A\u043E\u0439","\u0438\u043C","\u0431\u043E\u043B\u0435\u0435","\u0432\u0441\u0435\u0433\u0434\u0430","\u043A\u043E\u043D\u0435\u0447\u043D\u043E","\u0432\u0441\u044E","\u043C\u0435\u0436\u0434\u0443"];case"es":return["de","la","que","el","en","y","a","los","del","se","las","por","un","para","con","no","una","su","al","lo","como","m\xE1s","pero","sus","le","ya","o","este","s\xED","porque","esta","entre","cuando","muy","sin","sobre","tambi\xE9n","me","hasta","hay","donde","quien","desde","todo","nos","durante","todos","uno","les","ni","contra","otros","ese","eso","ante","ellos","e","esto","m\xED","antes","algunos","qu\xE9","unos","yo","otro","otras","otra","\xE9l","tanto","esa","estos","mucho","quienes","nada","muchos","cual","poco","ella","estar","estas","algunas","algo","nosotros","mi","mis","t\xFA","te","ti","tu","tus","ellas","nosotras","vosotros","vosotras","os","m\xEDo","m\xEDa","m\xEDos","m\xEDas","tuyo","tuya","tuyos","tuyas","suyo","suya","suyos","suyas","nuestro","nuestra","nuestros","nuestras","vuestro","vuestra","vuestros","vuestras","esos","esas","estoy","est\xE1s","est\xE1","estamos","est\xE1is","est\xE1n","est\xE9","est\xE9s","estemos","est\xE9is","est\xE9n","estar\xE9","estar\xE1s","estar\xE1","estaremos","estar\xE9is","estar\xE1n","estar\xEDa","estar\xEDas","estar\xEDamos","estar\xEDais","estar\xEDan","estaba","estabas","est\xE1bamos","estabais","estaban","estuve","estuviste","estuvo","estuvimos","estuvisteis","estuvieron","estuviera","estuvieras","estuvi\xE9ramos","estuvierais","estuvieran","estuviese","estuvieses","estuvi\xE9semos","estuvieseis","estuviesen","estando","estado","estada","estados","estadas","estad","he","has","ha","hemos","hab\xE9is","han","haya","hayas","hayamos","hay\xE1is","hayan","habr\xE9","habr\xE1s","habr\xE1","habremos","habr\xE9is","habr\xE1n","habr\xEDa","habr\xEDas","habr\xEDamos","habr\xEDais","habr\xEDan","hab\xEDa","hab\xEDas","hab\xEDamos","hab\xEDais","hab\xEDan","hube","hubiste","hubo","hubimos","hubisteis","hubieron","hubiera","hubieras","hubi\xE9ramos","hubierais","hubieran","hubiese","hubieses","hubi\xE9semos","hubieseis","hubiesen","habiendo","habido","habida","habidos","habidas","soy","eres","es","somos","sois","son","sea","seas","seamos","se\xE1is","sean","ser\xE9","ser\xE1s","ser\xE1","seremos","ser\xE9is","ser\xE1n","ser\xEDa","ser\xEDas","ser\xEDamos","ser\xEDais","ser\xEDan","era","eras","\xE9ramos","erais","eran","fui","fuiste","fue","fuimos","fuisteis","fueron","fuera","fueras","fu\xE9ramos","fuerais","fueran","fuese","fueses","fu\xE9semos","fueseis","fuesen","sintiendo","sentido","sentida","sentidos","sentidas","siente","sentid","tengo","tienes","tiene","tenemos","ten\xE9is","tienen","tenga","tengas","tengamos","teng\xE1is","tengan","tendr\xE9","tendr\xE1s","tendr\xE1","tendremos","tendr\xE9is","tendr\xE1n","tendr\xEDa","tendr\xEDas","tendr\xEDamos","tendr\xEDais","tendr\xEDan","ten\xEDa","ten\xEDas","ten\xEDamos","ten\xEDais","ten\xEDan","tuve","tuviste","tuvo","tuvimos","tuvisteis","tuvieron","tuviera","tuvieras","tuvi\xE9ramos","tuvierais","tuvieran","tuviese","tuvieses","tuvi\xE9semos","tuvieseis","tuviesen","teniendo","tenido","tenida","tenidos","tenidas","tened"];case"sv":return["och","det","att","i","en","jag","hon","som","han","p\xE5","den","med","var","sig","f\xF6r","s\xE5","till","\xE4r","men","ett","om","hade","de","av","icke","mig","du","henne","d\xE5","sin","nu","har","inte","hans","honom","skulle","hennes","d\xE4r","min","man","ej","vid","kunde","n\xE5got","fr\xE5n","ut","n\xE4r","efter","upp","vi","dem","vara","vad","\xF6ver","\xE4n","dig","kan","sina","h\xE4r","ha","mot","alla","under","n\xE5gon","eller","allt","mycket","sedan","ju","denna","sj\xE4lv","detta","\xE5t","utan","varit","hur","ingen","mitt","ni","bli","blev","oss","din","dessa","n\xE5gra","deras","blir","mina","samma","vilken","er","s\xE5dan","v\xE5r","blivit","dess","inom","mellan","s\xE5dant","varf\xF6r","varje","vilka","ditt","vem","vilket","sitta","s\xE5dana","vart","dina","vars","v\xE5rt","v\xE5ra","ert","era","vilkas"];case"":return[];default:let t=`Language ${e} not currently supported. Stopwords are disabled.`;return console.warn(t),[]}}};var U=class{static parseCodes(e,t){let s=[];if(!e)s=[];else if(!("FLAG"in t))s=e.split("");else if(t.FLAG==="long"){let a=[];for(var n=0,o=e.length;n<o;n+=2)a.push(e.substring(n,n+2));s=a}else t.FLAG==="num"?s=e.split(","):t.FLAG==="UTF-8"?s=Array.from(e):s=e.split("");return s}constructor(e,t,s,n){this.code=e,this.type=t,this.combinable=s,this.entries=n}applyRule(e,t,s){for(let n=0,o=this.entries.length;n<o;n++){let a=this.entries[n];if(!a.match||a.match.test(e)){let c=e;a.remove&&(c=c.replace(a.remove,"")),this.type==="SFX"?c=c+a.add:c=a.add+c,s.push(c);let u=a.continuationClasses.length;if(u>0)for(let l=0;l<u;l++){let r=a.continuationClasses[l],d=t[r];d&&d.applyRule(c,t,s)}}}}},z=class{constructor(e,t,s,n){this.add=e||null,this.match=this.getMemoRegex(t),this.remove=this.getMemoRegex(s),this.continuationClasses=n||[]}static fromLine(e,t,s){let n=e.split(/\s+/),o=n[2],a=n[3]?n[3].split("/"):[],c=n[4],u=a[0],l=a[1];u==="0"&&(u="");let r=u,d=null;c&&c!=="."&&(t==="SFX"?d=`${c}$`:d=`^${c}`);let i=null;o!="0"&&(t==="SFX"?i=`${o}$`:i=`${o}`);var h=U.parseCodes(l,s);return new z(r,d,i,h)}getMemoRegex(e){return e?z.regex[e]===void 0&&(z.regex[e]=this.getRegex(e)):z.regex[e]=null,z.regex[e]}getRegex(e){try{return new RegExp(e)}catch{return null}}};z.regex=Object.create(null);var G=class{constructor(e,t,s,n){if(!(e&&t&&s)){let o=`dictionary (${e}) || affData (${t}) || wordsData (${s}) 
				not provided.unlike Typo.js, all are required by the constructor.`;throw new Error(o)}this.dictionary=e,this.affData=t,this.wordsData=s,this.settings=n!=null?n:Object.create(null),this.rules={},this.combinableRules={},this.dictionaryMap=new Map,this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags="flags"in this.settings?this.settings.flags:Object.create(null),this.memoized={},this.loaded=!1,this.alphabet="",this.setup()}checkExact(e){if(!this.loaded)throw"Dictionary not loaded.";let t=this.dictionaryMap.get(e),s,n;if(typeof t=="undefined"){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN){for(s=0,n=this.compoundRules.length;s<n;s++)if(e.match(this.compoundRules[s]))return!0}}else{if(t===null)return!0;if(typeof t=="object"){for(s=0,n=t.length;s<n;s++)if(!this.hasFlag(e,"ONLYINCOMPOUND",[t[s]]))return!0}}return!1}suggest(e,t){if(!this.loaded)throw"Dictionary not loaded.";let s="";if(t=t||5,this.memoized.hasOwnProperty(e)){var n=this.memoized[e].limit;if(t<=n||this.memoized[e].suggestions.length<n)return this.memoized[e].suggestions.slice(0,t)}if(this.check(e))return[];for(var o=0,a=this.replacementTable.length;o<a;o++){var c=this.replacementTable[o];if(e.indexOf(c[0])!==-1){var u=e.replace(c[0],c[1]);if(this.check(u))return[u]}}if(!this.alphabet){this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ","TRY"in this.flags&&(this.alphabet+=this.flags.TRY),"WORDCHARS"in this.flags&&(this.alphabet+=this.flags.WORDCHARS);var l=this.alphabet.split("");l.sort();for(var r={},o=0;o<l.length;o++)r[l[o]]=!0;this.alphabet="";for(var d in r)this.alphabet+=d}function i(m,g){var v={},w,y,k,R,C,x,A=this.alphabet.length;if(typeof m=="string"){var S=m;m={},m[S]=!0}for(var S in m)for(w=0,R=S.length+1;w<R;w++){var L=[S.substring(0,w),S.substring(w)];if(L[1]&&(x=L[0]+L[1].substring(1),(!g||this.check(x))&&(x in v?v[x]+=1:v[x]=1)),L[1].length>1&&L[1][1]!==L[1][0]&&(x=L[0]+L[1][1]+L[1][0]+L[1].substring(2),(!g||this.check(x))&&(x in v?v[x]+=1:v[x]=1)),L[1]){var q=L[1].substring(0,1).toUpperCase()===L[1].substring(0,1)?"uppercase":"lowercase";for(y=0;y<A;y++){var D=this.alphabet[y];q==="uppercase"&&(D=D.toUpperCase()),D!=L[1].substring(0,1)&&(x=L[0]+D+L[1].substring(1),(!g||this.check(x))&&(x in v?v[x]+=1:v[x]=1))}}if(L[1])for(y=0;y<A;y++){var q=L[0].substring(-1).toUpperCase()===L[0].substring(-1)&&L[1].substring(0,1).toUpperCase()===L[1].substring(0,1)?"uppercase":"lowercase",D=this.alphabet[y];q==="uppercase"&&(D=D.toUpperCase()),x=L[0]+D+L[1],(!g||this.check(x))&&(x in v?v[x]+=1:v[x]=1)}}return v}function h(m){let g=i(m,!1),w=i(g,!0);for(var y in g)this.check(y)&&(y in w?w[y]+=g[y]:w[y]=g[y]);let k,R,C=[];for(k in w)w.hasOwnProperty(k)&&C.push([k,w[k]]);function x(q,D){let Q=q[1],ee=D[1];return Q<ee?-1:Q>ee?1:D[0].localeCompare(q[0])}C.sort(x).reverse();let A=[],S="lowercase";m.toUpperCase()===m?S="uppercase":m.substr(0,1).toUpperCase()+m.substr(1).toLowerCase()===m&&(S="capitalized");let L=t;for(k=0;k<Math.min(L,C.length);k++)S==="uppercase"?C[k][0]=C[k][0].toUpperCase():S==="capitalized"&&(C[k][0]=C[k][0].substr(0,1).toUpperCase()+C[k][0].substr(1)),!this.hasFlag(C[k][0],"NOSUGGEST",null)&&A.indexOf(C[k][0])==-1?A.push(C[k][0]):L++;return A}return this.memoized[e]={suggestions:h(e),limit:t},this.memoized[e].suggestions}setup(){let e=0,t=0,s=0,n=0;for(this.rules=this._parseAFF(this.affData),this.combinableRules=Object.assign({},...Object.entries(this.rules).filter(([u,l])=>l.combinable).map(([u,l])=>({[u]:l}))),this.compoundRuleCodes=Object.create(null),e=0,s=this.compoundRules.length;e<s;e++){var o=this.compoundRules[e];for(t=0,n=o.length;t<n;t++)this.compoundRuleCodes[o[t]]=[]}"ONLYINCOMPOUND"in this.flags&&(this.compoundRuleCodes[this.flags.ONLYINCOMPOUND]=[]);let a=`typo.ts loaded ${this.dictionary} dictionary`;console.time(a),this.parseDIC(this.wordsData),console.timeEnd(a);for(let u in this.compoundRuleCodes)this.compoundRuleCodes[u].length===0&&delete this.compoundRuleCodes[u];for(e=0;e<this.compoundRules.length;e++){let u=this.compoundRules[e],l="";for(t=0,n=u.length;t<n;t++){var c=u[t];c in this.compoundRuleCodes?l+="("+this.compoundRuleCodes[c].join("|")+")":l+=c}this.compoundRules[e]=new RegExp(l,"i")}this.loaded=!0}_parseAFF(e){let t=/\r?\n/,s=/\s+/,n=Object.create(null),o,a,c,u,l,r,d,i,h=e.split(t);for(l=0,d=h.length;l<d;l++){if(o=this._removeAffixComments(h[l]),o=o.trim(),!o)continue;let v=o.split(s),w=v[0],y=[];if(w=="PFX"||w=="SFX"){var m=v[1],g=v[2];let k=parseInt(v[3],10);for(r=l+1,i=l+1+k;r<i;r++)a=h[r],y.push(z.fromLine(a,w,this.flags));n[m]=new U(m,w,g==="Y",y),l+=k}else if(w==="COMPOUNDRULE"){for(c=parseInt(v[1],10),r=l+1,i=l+1+c;r<i;r++)o=h[r],u=o.split(/\s+/),this.compoundRules.push(u[1]);l+=c}else w==="REP"?(u=o.split(/\s+/),u.length===3&&this.replacementTable.push([u[1],u[2]])):this.flags[w]=v[1]}return n}_removeAffixComments(e){return e.match(/^\s*#/)?"":e}addWord(e,t){let s=this.dictionaryMap.get(e),n=t.length>0;s===void 0?n?this.dictionaryMap.set(e,t):this.dictionaryMap.set(e,null):s===null?n&&this.dictionaryMap.set(e,t):n&&s.push.apply(s,t)}parseDIC(e){e=this.removeDicComments(e);let t=e.split(/\r?\n/);this.dictionaryMap.clear();let s=[],n=[],o=0,a;for(let u=0,l=t.length;u<l;u++){let[r,d]=t[u].split("/",2);if(d){a=U.parseCodes(d,this.flags),o=a.length,s.length=0,n.length=0,(!("NEEDAFFIX"in this.flags)||a.indexOf(this.flags.NEEDAFFIX)==-1)&&this.addWord(r,a);for(let i=0;i<o;i++){let h=a[i],m=this.rules[h];if(s.length=0,n.length=0,m&&(m.applyRule(r,this.rules,s),m.combinable)){let w=s.length;for(let y=0;y<w;y++){let k=s[y];for(let R=0;R<o;R++){var c=this.combinableRules[a[R]];c&&m.type!==c.type&&c.applyRule(k,this.rules,n)}}}s.push.apply(s,n);let g=new Set(s),v=g.size;for(let w of g)this.addWord(w,[]);h in this.compoundRuleCodes&&this.compoundRuleCodes[h].push(r)}}else this.addWord(r.trim(),[])}}removeDicComments(e){return e=e.replace(/^\t.*$/mg,""),e}check(e){if(!this.loaded)throw"Dictionary not loaded.";var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(t===""||this.checkExact(t))return!0;if(t.toUpperCase()===t){var s=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(s,"KEEPCASE",null))return!1;if(this.checkExact(s)||this.checkExact(t.toLowerCase()))return!0}var n=t[0].toLowerCase()+t.substring(1);if(n!==t){if(this.hasFlag(n,"KEEPCASE",null))return!1;if(this.checkExact(n))return!0}return!1}hasFlag(e,t,s){if(!this.loaded)throw"Dictionary not loaded.";if(t in this.flags){if(typeof s=="undefined"){let n=this.dictionaryMap.get(e);s=Array.prototype.concat.apply([],n)}if(s&&s.indexOf(this.flags[t])!==-1)return!0}return!1}};var j;(function(E){E[E.Ascending=0]="Ascending",E[E.Descending=1]="Descending"})(j||(j={}));var O=class{constructor(e,t,s,n){this.label=e,this.offset=t,this.limit=s,this.extended=n}},B=class{constructor(e,t,s,n){this.primaryHeading=e,this.primarySort=t,this.secondaryHeading=s,this.secondarySort=n}};var T=class{static createElement(e,t,s,n,o,a,c,u,l,r,d){console.warn("createElement() is deprecated, use create()");let i=new T(t,s,n,o,a,c,u,l,r,d);return e==null||e.appendChild(i.baseElement),b.postContentHeight(),i}static create(e){let{container:t,project:s,headings:n,results:o,perPage:a=20,header:c="",resultsSort:u=new B("ID",j.Ascending,"ID",j.Ascending),rowRenderer:l=null,cellRenderer:r=null,cellHandler:d=null,exportExtra:i=null}=e,h=new T(s,a,c,n,o,u,l,r,d,i);return t==null||t.appendChild(h.baseElement),b.postContentHeight(),h}static generateFormatedColumnNumber(e){return`${e.toString().padStart(2,"0")}.`}static sortResultsHelper(e,t,s,n,o,a,c){return s&&a?c===j.Ascending?t-o:o-t:e!==void 0&&n!==void 0?c===j.Ascending?e.localeCompare(n):n.localeCompare(e):(console.warn(`sort failure: ${e}, ${n}`),0)}constructor(e,t,s,n,o,a,c,u,l,r){this.paginationEdgeRangeDesktop=2,this.paginationEdgeRangeMobile=1,this.baseElement=document.createElement("div"),this.header=s,this.results=o,this.resultsSort=a,this.headings=n,this.perPage=t,this.project=e,this.resultsCount=o.length,this.resultsOffset=0,this.cellRenderer=u,this.rowRenderer=c,this.cellHandler=l,this.exportExtra=r,this.scrollHandler=d=>{var i;let h=d.data;if(h==null){this.setStickyHeaders(0);return}let m=h.data,g=(i=m==null?void 0:m.reportScrollY)!==null&&i!==void 0?i:null;g===null||(h==null?void 0:h.target)!=="interrobot"||this.setStickyHeaders(g)},this.navHandler=d=>{this.resultsOffset=parseInt(d.target.dataset.offset),this.renderSection(),b.postContentHeight()},this.browserLinkHandler=d=>{let i=d.target,h=!0;b.postOpenResourceLink(Number(i.dataset.id),h),d.preventDefault(),d.stopPropagation()},this.appLinkHandler=d=>{let i=d.target,h=!1;b.postOpenResourceLink(Number(i.dataset.id),h),d.preventDefault(),d.stopPropagation()},this.sortableHandler=d=>{if(d.preventDefault(),this.results.length===0)return;let h=d.currentTarget.dataset.heading,m;this.resultsSort.primaryHeading===h?m=this.resultsSort.primarySort===j.Ascending?j.Descending:j.Ascending:m=j.Ascending,this.resultsSort.primaryHeading=h,this.resultsSort.primarySort=m,this.resultsOffset=0,this.sortResults(),this.renderSection();let g={target:"interrobot",data:{reportScrollToTop:!0}};window.parent.postMessage(g,"*")},this.downloadMenuHandler=d=>{let i=this.baseElement.querySelector(".info__dl");i!==null&&(i.classList.toggle("visible"),d.preventDefault())},this.downloadHandler=d=>{var i,h;d.preventDefault(),this.baseElement.querySelector(".info__dl").classList.remove("visible");let g=this.headings.concat(Object.keys((i=this.exportExtra)!==null&&i!==void 0?i:{})),v=!1;g[0]===""&&(v=!0,g.shift());let w=[];for(let k=0;k<this.results.length;k++){let R=this.results[k],C=Object.values((h=this.exportExtra)!==null&&h!==void 0?h:{}),x=[];for(let A of C)if(typeof A=="function"){let S=A(k);x.push(S)}else x.push(A.toString());v?w.push(R.slice(1).concat(x)):w.push(R.concat(x))}let y={target:"interrobot",data:{reportExport:{format:d.target.dataset.format,headers:g,rows:w}}};window.parent.postMessage(y,"*")},this.renderSection()}getHeadingIndex(e){return this.headings.indexOf(e)}getResults(){return this.results}getHeadings(){return this.headings}getResultsSort(){return this.resultsSort}setStickyHeaders(e){let t=this.baseElement.querySelector("thead"),s=t==null?void 0:t.parentElement;if(t===null||s===null)return;let n=s.getBoundingClientRect();n.top<=e&&e<=n.bottom?(t.classList.add("sticky"),t.style.top=`${e-n.top}px`):(t.classList.remove("sticky"),t.style.top="auto")}setOffsetPage(e){let t=e*this.perPage;t!==this.resultsOffset&&(this.resultsOffset=t,this.renderSection())}sortResults(){let e=this.resultsSort.primaryHeading,t=this.resultsSort.primarySort,s=this.getHeadingIndex(e),n=this.resultsSort.secondaryHeading,o=this.resultsSort.secondarySort,a=this.getHeadingIndex(n),c=/^[-+]?[0-9]+([,.]?[0-9]+)?$/;if(s===-1){console.warn(`heading '${this.resultsSort.primaryHeading}' not found, aborting sort`);return}let u=(l,r)=>{let d=l[s],i=c.test(d)?parseFloat(d):null,h=i!==null&&!isNaN(i),m=r[s],g=c.test(m)?parseFloat(m):null,v=g!==null&&!isNaN(g);if(d===m){let w=l[a],y=parseFloat(w),k=!isNaN(y),R=r[a],C=parseFloat(R),x=!isNaN(C);return T.sortResultsHelper(w,y,k,R,C,x,o)}else return T.sortResultsHelper(d,i,h,m,g,v,t)};if(this.results.sort(u),this.headings[0]==="")for(let l=0;l<this.results.length;l++)this.results[l][0]=T.generateFormatedColumnNumber(l+1)}getColumnClass(e){return`column__${e?e.replace(/[^\w]+/g,"").toLowerCase():"empty"}`}renderTableHeadings(e){let t=[],s=`<svg version="1.1" class="chevrons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	        x="0px" y="0px" width="12px" height="20px" viewBox="6 2 12 20" enable-background="new 6 2 12 20" xml:space="preserve">
            <title>north/south chevrons</title>
	        <polyline class="d2" fill="none" stroke="#000000" stroke-miterlimit="10" points="7.32,16.655 12.015,21.208 16.566,16.633"/>
	        <polyline class="d1" fill="none" stroke="#000000" stroke-miterlimit="10" points="7.314,13.274 12.01,17.827 16.561,13.253"/>
	        <polyline class="u2" fill="none" stroke="#000000" stroke-miterlimit="10" points="16.685,10.594 12.115,6.041 7.439,10.615"/>
	        <polyline class="u1" fill="none" stroke="#000000" stroke-miterlimit="10" points="16.679,7.345 12.11,2.792 7.434,7.365"/>
        </svg>`;for(let n of e){let o=f.htmlEncode(this.getColumnClass(n)),a=`${f.htmlEncode(n)}`,c=o!=="column__empty",u="",l="";c?(u=`<a tabindex="0" class="sortable" data-heading="${f.htmlEncode(n)}" href="#">${f.htmlEncode(a)}</a>`,l=`<a tabindex="-1" title="${a}" class="sortable" data-heading="${f.htmlEncode(n)}" href="#">
                    ${s}<span class="reader">${a}</span></a>`):u=`${f.htmlEncode(a)}`,t.push(`<th class="${o}">`+u+" "+l+"</th>")}return t.join("")}renderTableData(){let e=[],t=this.getHeadingIndex("ID"),s=this.results.slice(this.resultsOffset,this.resultsOffset+this.perPage);for(let n=0;n<s.length;n++){let o=s[n],a=this.headings.reduce((l,r,d)=>({...l,[r]:o[d]}),{}),c=[],u=[];if(this.rowRenderer){let l=this.rowRenderer(o,this.headings);"classes"in l&&u.push.apply(u,l.classes)}for(let l=0;l<o.length;l++){let r=[],d=this.headings[l];r.push(this.getColumnClass(d));let i=o[l],h=Number(i),m=!isNaN(h)||i.match(/^\d+\/\d+$/)!==null;m?r.push("numeric"):f.isUrl(i)&&r.push("url");let g=`${i}`,v=Number(i),w=this.cellRenderer&&d in this.cellRenderer?this.cellRenderer[d]:null;if(w){let y=w(i,a,n);g=y.content,r.push(...y.classes)}else m&&!isNaN(v)&&d!==""&&d!=="ID"?g=`${Number(i).toLocaleString()}`:r.indexOf("url")>-1&&(g=`<a tabindex="0" class="ulink" data-id="${f.htmlEncode(o[t])}" 
                        href="${f.htmlEncode(i)}">${f.htmlEncode(i)}</a>`);c.push(`<td class="${f.htmlEncode(r.join(" "))}">${g}</td>`)}e.push(`<tr class="${f.htmlEncode(u.join(" "))}">${c.join("")}</tr>`)}return e}renderSection(){this.removeHandlers(),this.resultsSort.primarySort!==null&&this.resultsSort.primaryHeading!==null&&this.sortResults();let e=this.renderTableData();if(e.length===0){this.baseElement.innerHTML=`<section>${this.header}<p>No results found.</p></section>`;return}let t=[],s=this.getPagination(),n={"\u25C0\u25C0":!0,"\u25B6\u25B6":!0};for(let r=0;r<s.length;r++){let d=s[r],i=[];d.label in n?i.push(d.label=="\u25C0\u25C0"?"rewind":"fastforward"):d.offset===this.resultsOffset?i.push("current"):d.extended&&i.push("extended"),t.push(`<button class="${i.join(" ")}" data-offset="${d.offset}">${d.label}</button>`)}let o=this.resultsOffset+1,a=Math.min(this.resultsCount,this.resultsOffset+this.perPage),c=this.isCorePlugin()?"`":"\u229E",u=`<section>
            ${this.header}
            <hgroup>
                <div class="info">
                    <span class="info__dl export">
                        <button class="icon">${c}</button>
                        <ul class="export__ulink">
                            <li><a tabindex="0" class="ulink" href="#" data-format="csv">Export CSV</a></li>
                            <li><a tabindex="0" class="ulink" href="#" data-format="xlsx">Export Excel</a></li>
                        </ul>
                    </span>
                    <span class="info__results"><span class="info__results__nobr">
                        ${o.toLocaleString()} - ${a.toLocaleString()}</span> 
                        <span class="info__results__nobr">of ${this.resultsCount.toLocaleString()}</span></span>
                </div>
                <nav>${t.join("")}</nav>
            </hgroup>
            <div class="datatable">
                <table>
                    <thead>
                        <tr>
                            ${this.renderTableHeadings(this.headings)}                        
                        </tr>
                    </thead>
                    <tbody>
                        ${e.join("")}
                    </tbody>
                </table>
            </div>`;this.baseElement.innerHTML=u;let l=this.baseElement.querySelectorAll("a.sortable");for(let r=0;r<l.length;r++){let d=l[r];if(d.classList.remove("ascending","descending"),d.dataset.heading===this.resultsSort.primaryHeading){let i=this.resultsSort.primarySort==j.Ascending?"ascending":"descending";d.classList.add(i)}}this.addHandlers()}addHandlers(){this.applyHandlers(!0)}removeHandlers(){this.applyHandlers(!1)}isCorePlugin(){let e=window.self!==window.top,t=!1;if(e)try{t=!!window.parent.location.href}catch{t=!1}return e&&t}applyHandlers(e){let t=e?"addEventListener":"removeEventListener",s=this.baseElement.querySelectorAll("nav button");for(let i=0;i<s.length;i++)s[i][t]("click",this.navHandler);let n=this.baseElement.querySelectorAll(".info__dl .ulink");for(let i=0;i<n.length;i++)n[i][t]("click",this.downloadHandler);let o=this.baseElement.querySelector(".info__dl button");if(o!==null&&(o[t]("click",this.downloadMenuHandler),matchMedia("(pointer:fine)").matches&&!/android/i.test(window.navigator.userAgent))){let h=this.baseElement.querySelector(".info__dl");h==null||h.classList.add("hasmouse")}this.baseElement.querySelector("thead")&&(window[t]("message",this.scrollHandler),window[t]("resize",this.scrollHandler));let c=this.baseElement.querySelector("table");if(c){let i=document.querySelector(".wrap");c[t]("touchstart",h=>{i==null||i.classList.add("dragging"),h.stopPropagation()},{passive:!0}),c[t]("touchend",h=>{i==null||i.classList.remove("dragging"),h.stopPropagation()},{passive:!0}),c[t]("touchmove",h=>{h.stopPropagation()},{passive:!0})}let u=this.baseElement.querySelectorAll("button.custom");if(this.cellHandler)for(let i of u)i[t]("click",this.cellHandler);let l=this.baseElement.querySelectorAll("td.url a");for(let i=0;i<l.length;i++)l[i][t]("click",this.browserLinkHandler);for(let i=0;i<s.length;i++)s[i][t]("click",this.navHandler);let r=this.baseElement.querySelectorAll("td.column__id a");for(let i=0;i<r.length;i++)r[i][t]("click",this.appLinkHandler);let d=this.baseElement.querySelectorAll("th a.sortable");for(let i=0;i<d.length;i++)d[i][t]("click",this.sortableHandler)}getPagination(){let e=[],t=0,s=this.paginationEdgeRangeDesktop,n=this.paginationEdgeRangeMobile,o=Math.ceil(this.resultsOffset/this.perPage),a=Math.max(s-o,0),c=Math.max(n-o,0);s+=Math.max(a,0),n+=Math.max(c,0);let u=this.resultsOffset;for(;u>0&&t<s;){u-=this.perPage;let m=`${u/this.perPage+1}`,g=new O(m,u,this.perPage,t>=n);e.push(g),t++}if(this.resultsOffset>0&&(e.push(new O("\u25C0",this.resultsOffset-this.perPage,this.perPage,!0)),e.push(new O("\u25C0\u25C0",0,this.perPage,!1))),e.reverse(),this.resultsCount>this.perPage){let m=`${this.resultsOffset/this.perPage+1}`,g=new O(m,this.resultsOffset,this.perPage,!1);e.push(g)}let l=this.paginationEdgeRangeDesktop,r=this.paginationEdgeRangeMobile,d=Math.ceil(this.resultsOffset/this.perPage),i=Math.max(l-d,0),h=Math.max(r-d,0);for(l+=Math.max(i,0),r+=Math.max(h,0),t=0,u=this.resultsOffset+this.perPage;u<this.resultsCount&&t<l;){let m=`${u/this.perPage+1}`,g=new O(m,u,this.perPage,t>=r);e.push(g),u+=this.perPage,t++}if(this.resultsCount>this.resultsOffset+this.perPage){e.push(new O("\u25B6",this.resultsOffset+this.perPage,this.perPage,!0));let m=this.resultsCount-this.resultsCount%this.perPage;m=m==this.resultsCount?m-this.perPage:m,e.push(new O("\u25B6\u25B6",m,this.perPage,!1))}return e}};var Y=class{constructor(e,t,s,n){if(["archimedean","rectangular"].indexOf(s)===-1)throw new Error("invalid spiral value");this.id=e,this.name=t,this.spiral=s,this.separated=n}toString(){return`{ id: ${this.id}, name: ${this.name}, spiral: ${this.spiral}, separated: ${this.separated},]`}},K=class{constructor(e,t){this.count=0,this.word=e,this.count=t}incrementCount(){this.count++}getCount(){return this.count}getWord(){return this.word}toString(){return`[${this.word} => ${this.count}]`}},p=class extends b{static getWordLayoutFontSize(e,t){if(p.cloudWordLayoutMemo===void 0){let u=0,l=1e7;e.forEach(i=>{u=Math.max(u,i.value),l=Math.min(l,i.value)});let r=Math.log1p(l),d=Math.log1p(u);p.cloudWordLayoutMemo={count:e.length,min:l,max:u,minLog:r,maxLog:d}}let s=p.cloudWordLayoutMemo.minLog,n=p.cloudWordLayoutMemo.maxLog,o=(Math.log1p(t)-n)/(s-n),a=p.wordsMaxOutput-(p.wordsMaxOutput-p.wordsMinOutput)*Math.pow(o,2);return Math.round(Math.min(Math.max(a,p.wordsMinOutput),p.wordsMaxOutput))}constructor(){super(),this.language="en_US",this.strategy=1,this.layout=p.layouts[0],this.minWordLength=3,this.backgroundColor="#ffffff",this.fontFamily="Montserrat SemiBold",this.wordMap=new Map,this.wordMapPresentation=[],this.resultsMap=new Map,this.perPage=25,this.table=null,this.progress=null,this.stopwordsTruth=X.getStopwordsTruth("en"),this.deleteWordHandler=async e=>{let t=e.target;for(let s=0;s<this.wordMapPresentation.length;s++)if(this.wordMapPresentation[s].word===t.dataset.word){this.wordMapPresentation.splice(s,1),await this.displayResults();break}},this.addWordHandler=async e=>{e.preventDefault();let s=e.target.form,n=s==null?void 0:s.querySelector("input[name='word']"),o=s==null?void 0:s.querySelector("input[name='count']"),a=n.value,c=Math.ceil(Number(o.value));if(a.length<this.minWordLength||c<=0){s.classList.add("error"),window.setTimeout(()=>{s.classList.remove("error")},900),e.preventDefault();return}let u=new K(a,c);this.wordMapPresentation.push(u),this.wordMapPresentation=this.sortAndTruncatePresentation(this.wordMapPresentation),await this.displayResults()},this.cloudExpandHandler=e=>{e.preventDefault();let t=document.querySelector(".cloud__wrapper");if(t)document.fullscreenElement?(document.exitFullscreen(),t.classList.remove("fullscreen")):(t==null||t.requestFullscreen(),t.classList.add("fullscreen"));else return},this.cloudRefreshHandler=e=>{e.preventDefault(),this.displayResults()},this.cloudDownloadHandler=async e=>{e.preventDefault();let t=d3.select(`#${p.svgId}`).node(),s=new XMLSerializer().serializeToString(t),n=document.createElement("canvas"),o=document.createElement("img");n.width=p.svgWidth,n.height=p.svgHeight;let c="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(s)));o.onload=async u=>{let l=n.getContext("2d",{willReadFrequently:!0});l.fillStyle=this.backgroundColor,l.fillRect(0,0,n.width,n.height),l.drawImage(o,0,0);let r=n.toDataURL("image/png");if(await b.postApiRequest("GetVersion",{})){let i={target:"interrobot",data:{reportExport:{format:"datauri",datauri:r}}};window.parent.postMessage(i,"*")}else{let i=document.createElement("a"),m=`wordcloud-${new Date().toISOString().slice(0,16).replace(/[\-\:T]/g,"")}.png`;i.download=m,i.href=r,i.click();let g=document.querySelector(".cloud__message");g&&(g.innerText=`Saved ${m} to ./Downloads`,g.classList.add("visible"),window.setTimeout(()=>{g.classList.remove("visible"),g.innerText=""},5e3))}},o.src=c},this.index()}async index(){let e=await P.getApiProject(this.getProjectId());this.render(`
            ${H.standardHeading(e,p.meta.title)}
            ${H.standardForm(`
            <form class="main__form__standard main__form__ltr main__form__wordcloud" id="WordcloudForm" spellcheck="false">
                <label>
                    <span>Strategy</span>
                    <select name="strategy">
                        <option value="1">Frequency</option>
                        <option value="0">Jargon</option>

                    </select>
                </label>
                <label>
                    <span>Layout</span>
                    <select name="layout">
                    </select>
                </label>
                <label>
                    <span>Min Word Length</span>
                    <select name="minWordLength">
                        <option value="3">3 characters</option>
                        <option value="4">4 characters</option>
                        <option value="5">5 characters</option>
                    </select>
                </label>
                <label>
                    <span>Font Family</span>
                    <input type="text" name="fontFamily" placeholder="Optional font" />
                </label>
                <label>
                    <span>Background</span>
                    <input type="color" name="backgroundColor" value="#ffffff" />
                    <span class="main__form__color">#??????</span>
                </label>
                <div><button class="submit">Generate</button></div>
            </form>
            <div id="WordcloudFormProgress"></div>`)}
            ${H.standardResults()}
        `);let t=document.querySelector("select[name='strategy']"),s=document.querySelector("select[name='minWordLength']"),n=document.querySelector("select[name='layout']"),o=document.querySelector("input[name='backgroundColor']"),a=document.querySelector("input[name='fontFamily']"),c=document.getElementById("WordcloudFormProgress");for(let i=0;i<p.layouts.length;i++){let h=p.layouts[i],m=document.createElement("option");m.innerText=h.name,m.setAttribute("value",`${h.id}`),n.appendChild(m)}a.addEventListener("mousedown",()=>{let i="Fontlist",h=document.getElementById(i);h===null?(h=document.createElement("div"),h.id=i,h.style.width=`${a.offsetWidth}px`,h.classList.add("fontlist"),["Arial","Georgia","Impact","Palatino","Tahoma","Times New Roman","Verdana"].forEach(g=>{let v=document.createElement("a");v.innerText=g,v.href="#",h.appendChild(v),v.addEventListener("mousedown",w=>{a.value=g,h.style.display="none";let y=new Event("change",{bubbles:!0,cancelable:!0});a.dispatchEvent(y)}),v.addEventListener("click",w=>{w.preventDefault()})}),a.parentElement.classList.add("fontlist__label"),a.parentElement.appendChild(h)):(h.style.display="block",h.style.width=`${a.offsetWidth}px`),a.addEventListener("blur",()=>{h.style.display="none"})});let u={},l=[t,s,n,o,a];await this.initData(u,l);let r=()=>{var i;this.strategy=Number(t.value),this.layout=(i=p.layouts.find(m=>m.id.toString()==n.value))!==null&&i!==void 0?i:p.layouts[0],this.minWordLength=Number(s.value),this.backgroundColor=o.value,this.fontFamily=a.value?a.value:"Montserrat SemiBold";let h=document.querySelector(".main__form__color");h&&(h.innerText=this.backgroundColor)};o.addEventListener("change",i=>{r()}),this.progress=_.createElement(c,"Scanning: "),this.strategy=Number(t.value),r();let d=document.querySelector("button");d.addEventListener("click",async i=>{i.preventDefault(),d.setAttribute("disabled","disabled"),r();try{await this.process()}catch(h){console.error(h)}finally{d.removeAttribute("disabled")}}),b.postContentHeight()}async process(){await this.data.updateData();let e="/hunspell",t={method:"GET",headers:{Accept:"text/plain","Content-Type":"text/plain; charset=UTF-8"}},[s,n]=await Promise.all([fetch(`${p.baseMediaPath}/hunspell/${this.language}.aff`,t).then(r=>r.text()),fetch(`${p.baseMediaPath}/hunspell/${this.language}.dic`,t).then(r=>r.text())]);p.typo=new G(this.language,s,n),this.wordMap.clear();let o=this.getProjectId(),a="headers: text/html",c=new $({project:o,query:a,fields:["content"],type:N.Any,includeExternal:!1,includeNoRobots:!1}),u={paginate:!0,showProgress:!1,progressMessage:"Finding jargon\u2026"};await M.execute(c,this.resultsMap,async r=>{await this.wordcloudResultHandler(r)},u);let l=[...this.wordMap.values()];this.wordMapPresentation=this.sortAndTruncatePresentation(l),await this.report()}async report(){await this.displayResults()}sortAndTruncatePresentation(e){return e=e.filter(t=>t.getWord().length>=this.minWordLength),e.sort((t,s)=>s.getCount()-t.getCount()),e.slice(0,p.maxPresentationWords)}async displayResults(){var e;p.cloudWordLayoutMemo=void 0,this.removeHandlers();let t=[];t.push('<div class="cloud__wrapper">'),t.push(`<form action="." method="get" class="cloud__actions">
            <div>
            <button class="cloud__action" aria-label="Expand">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="128px"
                height="128px" viewBox="388.5 1532.71 128 128" xml:space="preserve">
                <path d="M508.938,1653.148h-34.469v-7h27.469v-27.47h7V1653.148z M430.529,1653.148h-34.469v-34.47h7v27.47h27.469V1653.148z
                    M508.938,1574.741h-7v-27.47h-27.469v-7h34.469V1574.741z M403.06,1574.741h-7v-34.47h34.469v7H403.06V1574.741z"/>
            </svg>
            </button>
            <button class="cloud__action" aria-label="Refresh">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="128px"
                height="128px" viewBox="1188.5 1372.466 128 128" xml:space="preserve">
                <path d="M1210.944,1399.189c20.188-20.277,52.974-20.333,73.239-0.146l15.24,13.926v-16.084c0-2.383,8.632-2.383,8.632,0v25.896
                    c0,2.384-1.934,4.316-4.315,4.316h-25.896c-2.383,0-2.383-8.633,0-8.633h14.791l-14.342-13.14
                    c-0.045-0.044-0.101-0.089-0.134-0.135c-16.522-16.499-43.15-16.893-60.134-0.876c-17.343,16.354-18.142,43.666-1.788,61.01
                    c16.355,17.343,43.668,18.142,61.01,1.786c1.743-1.64,4.464-1.562,6.104,0.169c1.642,1.743,1.574,4.462-0.168,6.104
                    c-9.587,9.104-22.322,14.174-35.552,14.14h-0.696c-28.324-0.382-51.097-23.457-51.097-51.793
                    C1195.838,1422.028,1201.267,1408.889,1210.944,1399.189z"/>
            </svg>
            </button>
            <button class="cloud__action" aria-label="Download">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="128px"
                    height="128px" viewBox="1028.5 1212.5 128 128" xml:space="preserve">
                    <path d="M1066.222,1283.45l23.792,23.762c1.328,1.33,3.645,1.33,4.973,0l23.839-23.839c-0.018-0.049-0.116-0.781-1.131-2.058 c-1.345-1.692-3.121-2.872-3.875-2.872l-17.801,17.788v-75.353c-0.15-0.188-1.402-0.727-3.519-0.727s-3.368,0.539-3.54,0.814 l0.021,75.265l-17.834-17.832c-0.722,0.044-2.498,1.224-3.842,2.916C1066.291,1282.592,1066.192,1283.323,1066.222,1283.45z"/>
                    <path d="M1040.056,1290.463c-2.116,0-3.367,0.538-3.539,0.813l0.021,40.054c0,0.383,0,1.126,0.062,1.456 c0.33,0.062,1.073,0.062,1.456,0.062h108.889c0.383,0,1.126,0,1.456-0.062c0.062-0.33,0.062-1.073,0.062-1.456v-40.142 c-0.15-0.188-1.401-0.726-3.518-0.726c-2.115,0-3.366,0.538-3.538,0.813l0.021,34.537h-97.855v-34.625 C1043.422,1291.001,1042.171,1290.463,1040.056,1290.463z"/>                </svg>
            </button>
            </div>
            <div class="cloud__message">

            </div>
        </form>`);let s="";try{let m=await(await fetch(p.embedFont)).blob(),g=new FileReader;await new Promise(v=>{g.onloadend=()=>v(),g.readAsDataURL(m)}),s=g.result.toString().split(",")[1]}catch{console.warn("default font not embedded in svg")}t.push(`<svg class="cloud ${this.layout.spiral}" id="${p.svgId}" width="${p.svgWidth}" height="${p.svgHeight}"
            viewBox="0 0 ${p.svgWidth} ${p.svgHeight}" fill="${this.backgroundColor}"
            preserveAspectRatio="xMidYMid meet">
            <style>
            @font-face {
                font-family: 'Montserrat SemiBold';
                font-style: normal;
                font-weight: 600;
                src: url("data:font/woff2;base64,${s}") format("woff2");
            }
            svg {
                font-family: "Montserrat SemiBold";
            }
            text {
                stroke: #cccccc44;
                paint-order: stroke;
            }
            </style>
             </svg>
            </svg>`),t.push("</div>");let n=document.querySelector(".main__results");if(n!==null){n.innerHTML=t.join("");let h=n.querySelector("svg.cloud");h!==null&&h.style.backgroundColor&&(h.style.backgroundColor=(e=this.backgroundColor)!==null&&e!==void 0?e:"#ffffff")}let o=`<h2><span class="keywords">Word Cloud Terms</span></h2>
            <div>
                <p>
                Review word cloud data and modify terms (maximum ${p.maxPresentationWords} words).
                </p>
                <form id="WordcloundManagerAdd" action="." method="GET">
                    <input type="text" name="word" placeholder="term" required />
                    <input type="number" name="count" placeholder="count" required />
                    <button>Add Term</button>
                </form>
            </div>`,a=["","TERM","COUNT"],c=[];for(let h=0;h<this.wordMapPresentation.length;h++){let m=this.wordMapPresentation[h],g=f.htmlEncode(m.word);c.push([T.generateFormatedColumnNumber(h+1),`${m.getWord()}`,`${m.getCount()}`])}let u={},l=async h=>{h.target&&this.deleteWordHandler(h)},r=null,d={TERM:(h,m)=>({classes:["term"],content:`<strong>${h}</strong>
                        <button class="custom" data-word="${h}">
                        <span>\xD7</span> Remove</button>`})},i=new B("COUNT",j.Descending,"TERM",j.Ascending);this.table=T.createElement(n,this.getProjectId(),this.perPage,o,a,c,i,r,d,l,u),this.addHandlers(),this.generateCloud(),b.postContentHeight()}draw(e){if(this.cloudLayout===null){console.error("layout unavailable (not ready)");return}if(e.length===0){console.error("no words to add to cloud");return}e.reverse();let t=p.svgWidth/2,s=p.svgHeight/2,n=d3.scaleOrdinal(d3.schemeCategory10),o=`translate(${t},${s})`,c=d3.select(`#${p.svgId}`).append("g");c.attr("transform",o),c.selectAll("text").data(e).enter().append("text").style("font-size",r=>`${p.getWordLayoutFontSize(e,r.value)}px`).style("font-family",r=>`${r.fontFamily}`).style("fill",(r,d)=>n(d)).attr("text-anchor","middle").attr("transform",r=>`translate(${r.x},${r.y})rotate(${r.rotate})`).text(r=>r.text);let l=document.getElementById(p.svgId).querySelectorAll("text");for(let r=0;r<l.length;r++){let d=l[r],i=parseInt(d.style.fontSize,10);d.classList.add("zsort",`zsort${i}`)}}generateCloud(){let e=0,t=[];for(let n=0;n<this.wordMapPresentation.length;n++){let o=this.wordMapPresentation[n],a=o.getWord(),c=o.getCount();e=Math.max(e,c),t.push(o)}let s=t.map(n=>({text:n.getWord(),value:n.getCount(),fontFamily:this.fontFamily}));this.cloudLayout=d3.layout.cloud().size([p.svgWidth,p.svgHeight]).words(s).font(this.layout.separated?this.fontFamily:"").padding(4).rotate(()=>~~(Math.random()*2)*90).fontSize(function(n){return p.getWordLayoutFontSize(s,n.value)}).spiral(this.layout.spiral).on("end",this.draw.bind(this)),this.cloudLayout.start()}addHandlers(){this.table&&this.table.addHandlers(),this.applyHandlers(!0)}removeHandlers(){this.table&&this.table.removeHandlers(),this.applyHandlers(!1)}applyHandlers(e){let t=e?"addEventListener":"removeEventListener",s=document.querySelectorAll(".cloud__action");if(s.length==3){s[0][t]("click",this.cloudExpandHandler),s[1][t]("click",this.cloudRefreshHandler),s[2][t]("click",this.cloudDownloadHandler);let a=parseInt(this.backgroundColor.slice(1),16),c=a>>16&255,u=a>>8&255,l=a&255;.2126*c+.7152*u+.0722*l>128?(s[0].classList.add("light"),s[1].classList.add("light"),s[2].classList.add("light")):(s[0].classList.remove("light"),s[1].classList.remove("light"),s[2].classList.remove("light"))}let n=document.getElementById("WordcloundManagerAdd"),o=n==null?void 0:n.querySelector("button");o&&o[t]("click",this.addWordHandler)}async wordcloudResultHandler(e){if(!e.getContent()&&!e.hasProcessedContent())return;if(!e.hasProcessedContent()){let s=e.getContentTextOnly();e.setProcessedContent(s),e.clearFulltextFields()}let t=e.getProcessedContent().split(p.wordSplitRe);for(let s of t){let n=s.replace(p.wordTrimRe,"");if(n=n.replace(/['']/,"'"),this.stopwordsTruth[n.toLowerCase()]!==void 0||n.length<this.minWordLength)continue;let o=a=>{let c=a.toLocaleLowerCase(),u=this.wordMap.get(c);if(u===void 0){let l=new K(a,1);this.wordMap.set(c,l)}else u.incrementCount()};switch(this.strategy){case 0:this.isMisspelling(n,{})&&o(n);break;case 1:default:o(n);break}}this.resultsMap.has(e.id)||this.resultsMap.set(e.id,e)}isMisspelling(e,t){if(e.match(p.wordAnyNumberRe)!==null||e.match(p.wordAnyPunctuationRe)!==null)return!1;let s=!p.typo.check(e);if(s===!0)return s;let n=t[e]!==void 0,o=f.isUrl(e),a=e.match(p.wordNumericRe)!==null,c=e.match(p.wordHexRe)!==null,u=e.match(p.emailRegex)!==null,l=!isNaN(Date.parse(e));return n||a||c||u||l||o}async saveSvgAsImage(e,t){let s=new XMLSerializer().serializeToString(e),n=document.createElement("canvas");n.width=p.svgWidth,n.height=p.svgHeight;let o=document.createElement("img"),c="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(s)));o.onload=function(){n.getContext("2d",{willReadFrequently:!0}).drawImage(o,0,0);let l=n.toDataURL("image/png"),r=document.createElement("a");r.download=t,r.href=l,r.click()},o.src=c}};p.meta={title:"Website Word Cloud",category:"Visualization",version:"1.0.1",author:"InterroBot",synopsis:"create a wordcloud from website content",description:`Relive the Web 2.0 dream in all its grandeur! Website Word Cloud finds unique and
            interesting keywords in your web content and generates a word cloud, and the tools to tweak the
            visualization.


            Word selection is governed by strategy, extracting unique terms (jargon) or by frequency, which
            selects for any and all terms. The Layout option changes the aesthetic of the word cloud, while
            Min Word Length filters exactly that. For font options, you can enter any installed font on your device or
            select from a list of "web safe" fonts.
            


            InterroBot Word Cloud utilizes the d3 and d3-cloud open-source visualization libraries to bring
            your word clouds to life.`};p.layouts=[new Y(1,"Rectangle","rectangular",!0),new Y(2,"Elliptical","archimedean",!0)];p.baseMediaPath="";p.embedFont=p.baseMediaPath+"/fonts/Montserrat-SemiBold.woff2";p.cloudWordLayoutMemo=void 0;p.wordSplitRe=/[ â€”\-\/\|]/g;p.wordNumericRe=/^[v]?[\d\.\-â€“â€”:,<>=Ã—xX\(\)]+[MKBmkbgs]*$/g;p.wordHexRe=/^[\da-f]{6,}$/gi;p.emailRegex=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;p.wordTrimRe=/^[^\da-zA-ZÃ€-É]+|[^\da-zA-ZÃ€-É]+$/g;p.wordAnyNumberRe=/\d/;p.wordAnyPunctuationRe=/\p{P}/u;p.svgWidth=1920;p.svgHeight=1080;p.svgId="d3svg";p.maxPresentationWords=250;p.wordsMinOutput=12;p.wordsMaxOutput=55;b.initialize(p);})();
/*!
 * Stopwords themselves (c)?2023:
 * Source: NLTK (python natural language toolkit)
 * Apache License 2.0
 * from nltk.corpus import stopwords
 * print(json.dumps(stopwords.words('english'), ensure_ascii=False))
 */
/**
 * @license
 * This code may be useful for anyone trying to escape the
 * JS packaging vortex (0 dependency, pure ts, single source file).
 * For anyone else, you're better off using your favorite package
 * manager and type definitions to the original Typo.js. Beware,
 * browser extension and node 'fs' support have been removed.
 * There are not many contact points if you want to add them back,
 * yourself. Look to Typo.js for pre-baked solutions.
 *
 * Typescript/in-browser port, (c) 2023, Ben Caulfield
 * Released under same license as original Typo.js implementation.
 *
 * Copyright (c) 2011, Christopher Finke
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * The name of the author may not be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR FINKE BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
